cordova.define("cordova-plugin-media.BrowserMedia",function(d,b,f){var g=d("cordova/argscheck"),a=d("cordova/utils");var e={};function h(j){var i=new Audio();i.onloadstart=function(){c.onStatus(j.id,c.MEDIA_STATE,c.MEDIA_STARTING)};i.onplaying=function(){c.onStatus(j.id,c.MEDIA_STATE,c.MEDIA_RUNNING)};i.ondurationchange=function(k){c.onStatus(j.id,c.MEDIA_DURATION,k.target.duration||-1)};i.onerror=function(l){var k=l.target.error.code===MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED?{code:MediaError.MEDIA_ERR_ABORTED}:l.target.error;c.onStatus(j.id,c.MEDIA_ERROR,k)};i.onended=function(){c.onStatus(j.id,c.MEDIA_STATE,c.MEDIA_STOPPED)};if(j.src){i.src=j.src}return i}var c=function(m,i,k,j){g.checkArgs("SFFF","Media",arguments);this.id=a.createUUID();e[this.id]=this;this.src=m;this.successCallback=i;this.errorCallback=k;this.statusCallback=j;this._duration=-1;this._position=-1;c.onStatus(this.id,c.MEDIA_STATE,c.MEDIA_STARTING);try{this.node=h(this)}catch(l){c.onStatus(this.id,c.MEDIA_ERROR,{code:MediaError.MEDIA_ERR_ABORTED})}};c.MEDIA_STATE=1;c.MEDIA_DURATION=2;c.MEDIA_POSITION=3;c.MEDIA_ERROR=9;c.MEDIA_NONE=0;c.MEDIA_STARTING=1;c.MEDIA_RUNNING=2;c.MEDIA_PAUSED=3;c.MEDIA_STOPPED=4;c.MEDIA_MSG=["None","Starting","Running","Paused","Stopped"];c.prototype.play=function(){if(!this.node){try{this.node=h(this)}catch(i){c.onStatus(this.id,c.MEDIA_ERROR,{code:MediaError.MEDIA_ERR_ABORTED})}}this.node.play()};c.prototype.stop=function(){try{this.pause();this.seekTo(0);c.onStatus(this.id,c.MEDIA_STATE,c.MEDIA_STOPPED)}catch(i){c.onStatus(this.id,c.MEDIA_ERROR,i)}};c.prototype.seekTo=function(i){try{this.node.currentTime=i/1000}catch(j){c.onStatus(this.id,c.MEDIA_ERROR,j)}};c.prototype.pause=function(){try{this.node.pause();c.onStatus(this.id,c.MEDIA_STATE,c.MEDIA_PAUSED)}catch(i){c.onStatus(this.id,c.MEDIA_ERROR,i)}};c.prototype.getDuration=function(){return this._duration};c.prototype.getCurrentPosition=function(l,i){try{var k=this.node.currentTime;c.onStatus(this.id,c.MEDIA_POSITION,k);l(k)}catch(j){i(j)}};c.prototype.startRecord=function(){c.onStatus(this.id,c.MEDIA_ERROR,"Not supported")};c.prototype.stopRecord=function(){c.onStatus(this.id,c.MEDIA_ERROR,"Not supported")};c.prototype.release=function(){try{delete this.node}catch(i){c.onStatus(this.id,c.MEDIA_ERROR,i)}};c.prototype.setVolume=function(i){this.node.volume=i};c.onStatus=function(l,i,j){var k=e[l];if(k){switch(i){case c.MEDIA_STATE:k.statusCallback&&k.statusCallback(j);if(j===c.MEDIA_STOPPED){k.successCallback&&k.successCallback()}break;case c.MEDIA_DURATION:k._duration=j;break;case c.MEDIA_ERROR:k.errorCallback&&k.errorCallback(j);break;case c.MEDIA_POSITION:k._position=Number(j);break;default:console.error&&console.error("Unhandled Media.onStatus :: "+i);break}}else{console.error&&console.error("Received Media.onStatus callback for unknown media :: "+l)}};f.exports=c});