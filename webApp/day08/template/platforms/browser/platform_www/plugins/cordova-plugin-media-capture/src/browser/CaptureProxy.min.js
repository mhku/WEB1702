cordova.define("cordova-plugin-media-capture.CaptureProxy",function(d,b,f){var a=d("cordova-plugin-media-capture.MediaFile");var e=d("cordova-plugin-media-capture.MediaFileData");var h=d("cordova-plugin-media-capture.CaptureError");function g(k){var o=atob(k.split(",")[1]);var j=k.split(",")[0].split(":")[1].split(";")[0];var n=new ArrayBuffer(o.length);var l=new Uint8Array(n);for(var m=0;m<o.length;m++){l[m]=o.charCodeAt(m)}return new Blob([n],{type:j})}function c(){var i=document.createElement("div");i.style.cssText="left: 0px; top: 0px; width: 100%; height: 100%; position: fixed; z-index:9999;padding: 40px; background-color: rgba(0,0,0,0.75);text-align:center; visibility: hidden";i.innerHTML='<div id="captureHint" style="height:100%; position:relative; display:inline-flex; align-content:flex-start;"><h2 style="position: absolute; width: 100%; background-color: rgba(255,255,255,0.25); margin: 0">Click on preview to capture image. Click outside of preview to cancel.</h1><video id="capturePreview" style="height: 100%"></video></div>';document.body.appendChild(i);var j=document.getElementById("capturePreview");j.autoplay=true;j.onplay=function(){i.style.visibility="visible"};this.container=i;this.preview=j}c.prototype.startPreview=function(l,j,i){this.preview.onclick=function(n){n.stopPropagation();var m=document.createElement("canvas");m.width=this.videoWidth;m.height=this.videoHeight;m.getContext("2d").drawImage(k.preview,0,0);j(m.toDataURL("image/jpeg"))};this.container.onclick=function(){i(new h(h.CAPTURE_NO_MEDIA_FILES))};var k=this;navigator.getUserMedia({video:true},function(m){k._previewStream=m;k.preview.src=URL.createObjectURL(m)},function(){i(new h(h.CAPTURE_INTERNAL_ERR))})};c.prototype.destroyPreview=function(){this.preview.pause();this.preview.src=null;this._previewStream.stop();this._previewStream=null;this.container&&document.body.removeChild(this.container)};f.exports={captureAudio:function(i,j){j&&j(new h(h.CAPTURE_NOT_SUPPORTED))},captureVideo:function(i,j){j&&j(new h(h.CAPTURE_NOT_SUPPORTED))},captureImage:function(i,l,n){var k=function(q){l&&l(new h(q||h.CAPTURE_INTERNAL_ERR))};var m=n[0];var j=m.limit||1;if(typeof j!=="number"||j<1){k(h.CAPTURE_INVALID_ARGUMENT);return}var p=0;navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;if(!navigator.getUserMedia){k(h.CAPTURE_NOT_SUPPORTED);return}var o=new c();o.startPreview(j,function(q){if(++p>=j){o.destroyPreview()}var r=[];window.requestFileSystem(window.TEMPORARY,q.length*j,function(s){var t=j<=1?"image.jpg":"image"+p+".jpg";s.root.getFile(t,{create:true},function(u){u.createWriter(function(v){v.onwriteend=function(){u.getMetadata(function(w){r.push(new a(u.name,u.toURL(),"image/jpeg",w.modificationTime,w.size));if(p>=j){i(r)}},k)};v.onerror=k;v.write(g(q))})},k)},k)},function(q){o.destroyPreview();k(q.code)})},getFormatData:function(i,k,l){var j=document.createElement("img");j.src=l[0];j.onload=function(){i&&i(new e(null,0,j.height,j.width,0))}}};d("cordova/exec/proxy").add("Capture",f.exports)});