var common=require("./common");var fs=require("fs");function _sed(a,e,c,d){a=common.parseOptions(a,{i:"inplace"});if(typeof c==="string"||typeof c==="function"){c=c}else{if(typeof c==="number"){c=c.toString()}else{common.error("invalid replacement string")}}if(typeof e==="string"){e=RegExp(e)}if(!d){common.error("no files given")}if(typeof d==="string"){d=[].slice.call(arguments,3)}d=common.expand(d);var b=[];d.forEach(function(g){if(!fs.existsSync(g)){common.error("no such file or directory: "+g,true);return}var f=fs.readFileSync(g,"utf8").split("\n").map(function(h){return h.replace(e,c)}).join("\n");b.push(f);if(a.inplace){fs.writeFileSync(g,f,"utf8")}});return common.ShellString(b.join("\n"))}module.exports=_sed;