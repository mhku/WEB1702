var fs=require("fs");var path=require("path");var common=require("./common");function _mv(c,b,a){c=common.parseOptions(c,{f:"!no_force",n:"no_force"});if(arguments.length<3){common.error("missing <source> and/or <dest>")}else{if(arguments.length>3){b=[].slice.call(arguments,1,arguments.length-1);a=arguments[arguments.length-1]}else{if(typeof b==="string"){b=[b]}else{if("length" in b){b=b}else{common.error("invalid arguments")}}}}b=common.expand(b);var e=fs.existsSync(a),d=e&&fs.statSync(a);if((!e||!d.isDirectory())&&b.length>1){common.error("dest is not a directory (too many sources)")}if(e&&d.isFile()&&c.no_force){common.error("dest file already exists: "+a)}b.forEach(function(g){if(!fs.existsSync(g)){common.error("no such file or directory: "+g,true);return}var f=a;if(fs.existsSync(a)&&fs.statSync(a).isDirectory()){f=path.normalize(a+"/"+path.basename(g))}if(fs.existsSync(f)&&c.no_force){common.error("dest file already exists: "+f,true);return}if(path.resolve(g)===path.dirname(path.resolve(f))){common.error("cannot move to self: "+g,true);return}fs.renameSync(g,f)})}module.exports=_mv;