var fs=require("fs");var path=require("path");var common=require("./common");function _ln(i,a,h){i=common.parseOptions(i,{s:"symlink",f:"force"});if(!a||!h){common.error("Missing <source> and/or <dest>")}a=String(a);var b=path.normalize(a).replace(RegExp(path.sep+"$"),"");var g=(path.resolve(a)===b);h=path.resolve(process.cwd(),String(h));if(fs.existsSync(h)){if(!i.force){common.error("Destination file exists",true)}fs.unlinkSync(h)}if(i.symlink){var e=common.platform==="win";var c=e?"file":null;var d=g?b:path.resolve(process.cwd(),path.dirname(h),a);if(!fs.existsSync(d)){common.error("Source file does not exist",true)}else{if(e&&fs.statSync(d).isDirectory()){c="junction"}}try{fs.symlinkSync(c==="junction"?d:a,h,c)}catch(f){common.error(f.message)}}else{if(!fs.existsSync(a)){common.error("Source file does not exist",true)}try{fs.linkSync(a,h)}catch(f){common.error(f.message)}}}module.exports=_ln;