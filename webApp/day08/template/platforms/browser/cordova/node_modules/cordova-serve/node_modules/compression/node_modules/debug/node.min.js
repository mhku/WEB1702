var tty=require("tty");var util=require("util");exports=module.exports=require("./debug");exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.colors=[6,2,3,4,5,1];var fd=parseInt(process.env.DEBUG_FD,10)||2;var stream=1===fd?process.stdout:2===fd?process.stderr:createWritableStdioStream(fd);function useColors(){var a=(process.env.DEBUG_COLORS||"").trim().toLowerCase();if(0===a.length){return tty.isatty(fd)}else{return"0"!==a&&"no"!==a&&"false"!==a&&"disabled"!==a}}var inspect=(4===util.inspect.length?function(b,a){return util.inspect(b,void 0,void 0,a)}:function(b,a){return util.inspect(b,{colors:a})});exports.formatters.o=function(a){return inspect(a,this.useColors).replace(/\s*\n\s*/g," ")};function formatArgs(){var b=arguments;var d=this.useColors;var a=this.namespace;if(d){var e=this.color;b[0]="  \u001b[3"+e+";1m"+a+" \u001b[0m"+b[0]+"\u001b[3"+e+"m +"+exports.humanize(this.diff)+"\u001b[0m"}else{b[0]=new Date().toUTCString()+" "+a+" "+b[0]}return b}function log(){return stream.write(util.format.apply(this,arguments)+"\n")}function save(a){if(null==a){delete process.env.DEBUG}else{process.env.DEBUG=a}}function load(){return process.env.DEBUG}function createWritableStdioStream(c){var e;var b=process.binding("tty_wrap");switch(b.guessHandleType(c)){case"TTY":e=new tty.WriteStream(c);e._type="tty";if(e._handle&&e._handle.unref){e._handle.unref()}break;case"FILE":var a=require("fs");e=new a.SyncWriteStream(c,{autoClose:false});e._type="fs";break;case"PIPE":case"TCP":var d=require("net");e=new d.Socket({fd:c,readable:false,writable:true});e.readable=false;e.read=null;e._type="pipe";if(e._handle&&e._handle.unref){e._handle.unref()}break;default:throw new Error("Implement me. Unknown stream file type!")}e.fd=c;e._isStdio=true;return e}exports.enable(load());