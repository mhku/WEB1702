/*!
 * parseurl
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2014 Douglas Christopher Wilson
 * MIT Licensed
 */
;"use strict";var url=require("url");var parse=url.parse;var Url=url.Url;var simplePathRegExp=/^(\/\/?(?!\/)[^\?#\s]*)(\?[^#\s]*)?$/;module.exports=parseurl;module.exports.original=originalurl;function parseurl(c){var b=c.url;if(b===undefined){return undefined}var a=c._parsedUrl;if(fresh(b,a)){return a}a=fastparse(b);a._raw=b;return c._parsedUrl=a}function originalurl(c){var b=c.originalUrl;if(typeof b!=="string"){return parseurl(c)}var a=c._parsedOriginalUrl;if(fresh(b,a)){return a}a=fastparse(b);a._raw=b;return c._parsedOriginalUrl=a}function fastparse(e){var a=typeof e==="string"&&simplePathRegExp.exec(e);if(a){var d=a[1];var c=a[2]||null;var b=Url!==undefined?new Url():{};b.path=e;b.href=e;b.pathname=d;b.search=c;b.query=c&&c.substr(1);return b}return parse(e)}function fresh(a,b){return typeof b==="object"&&b!==null&&(Url===undefined||b instanceof Url)&&b._raw===a};