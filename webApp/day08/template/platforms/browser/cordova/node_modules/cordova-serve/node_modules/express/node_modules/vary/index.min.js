/*!
 * vary
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */
;"use strict";module.exports=vary;module.exports.append=append;var separators=/[\(\)<>@,;:\\"\/\[\]\?=\{\}\u0020\u0009]/;function append(g,e){if(typeof g!=="string"){throw new TypeError("header argument is required")}if(!e){throw new TypeError("field argument is required")}var a=!Array.isArray(e)?parse(String(e)):e;for(var c=0;c<a.length;c++){if(separators.test(a[c])){throw new TypeError("field argument contains an invalid header")}}if(g==="*"){return g}var f=g;var d=parse(g.toLowerCase());if(a.indexOf("*")!==-1||d.indexOf("*")!==-1){return"*"}for(var c=0;c<a.length;c++){var b=a[c].toLowerCase();if(d.indexOf(b)===-1){d.push(b);f=f?f+", "+a[c]:a[c]}}return f}function parse(a){return a.trim().split(/ *, */)}function vary(a,b){if(!a||!a.getHeader||!a.setHeader){throw new TypeError("res argument is required")}var c=a.getHeader("Vary")||"";var d=Array.isArray(c)?c.join(", "):String(c);if((c=append(d,b))){a.setHeader("Vary",c)}};