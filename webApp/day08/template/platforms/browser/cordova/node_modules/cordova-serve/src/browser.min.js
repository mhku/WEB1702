var exec=require("./exec"),Q=require("q");module.exports=function(b){var c=b.target||"chrome";var a=b.url||"";return getBrowser(c,b.dataDir).then(function(e){var d;var f=false;switch(process.platform){case"darwin":d=["open"];if(c=="chrome"){d.push("-n")}d.push("-a",e);break;case"win32":if(c==="edge"){e+=":"+a;f=true}d=['cmd /c start ""',e];break;case"linux":d=[e];break}if(!f){d.push(a)}var g=d.join(" ");return exec(g)})};function getBrowser(c,b){b=b||"temp_chrome_user_data_dir_for_cordova";var d=" --user-data-dir=/tmp/"+b;var a={win32:{ie:"iexplore",chrome:"chrome --user-data-dir=%TEMP%\\"+b,safari:"safari",opera:"opera",firefox:"firefox",edge:"microsoft-edge"},darwin:{chrome:'"Google Chrome" --args'+d,safari:"safari",firefox:"firefox",opera:"opera"},linux:{chrome:"google-chrome"+d,chromium:"chromium-browser"+d,firefox:"firefox",opera:"opera"}};c=c.toLowerCase();if(c in a[process.platform]){return Q(a[process.platform][c])}return Q.reject("Browser target not supported: "+c)};