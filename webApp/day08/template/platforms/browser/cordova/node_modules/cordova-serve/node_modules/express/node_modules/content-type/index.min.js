/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */
;var paramRegExp=/; *([!#$%&'\*\+\-\.\^_`\|~0-9A-Za-z]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'\*\+\-\.\^_`\|~0-9A-Za-z]+) */g;var textRegExp=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/;var tokenRegExp=/^[!#$%&'\*\+\-\.\^_`\|~0-9A-Za-z]+$/;var qescRegExp=/\\([\u000b\u0020-\u00ff])/g;var quoteRegExp=/([\\"])/g;var typeRegExp=/^[!#$%&'\*\+\-\.\^_`\|~0-9A-Za-z]+\/[!#$%&'\*\+\-\.\^_`\|~0-9A-Za-z]+$/;exports.format=format;exports.parse=parse;function format(e){if(!e||typeof e!=="object"){throw new TypeError("argument obj is required")}var d=e.parameters;var c=e.type;if(!c||!typeRegExp.test(c)){throw new TypeError("invalid type")}var a=c;if(d&&typeof d==="object"){var g;var f=Object.keys(d).sort();for(var b=0;b<f.length;b++){g=f[b];if(!tokenRegExp.test(g)){throw new TypeError("invalid parameter name")}a+="; "+g+"="+qstring(d[g])}}return a}function parse(c){if(!c){throw new TypeError("argument string is required")}if(typeof c==="object"){c=getcontenttype(c);if(typeof c!=="string"){throw new TypeError("content-type header is missing from object")}}if(typeof c!=="string"){throw new TypeError("argument string is required to be a string")}var b=c.indexOf(";");var e=b!==-1?c.substr(0,b).trim():c.trim();if(!typeRegExp.test(e)){throw new TypeError("invalid media type")}var d;var a;var g=new ContentType(e.toLowerCase());var f;paramRegExp.lastIndex=b;while(a=paramRegExp.exec(c)){if(a.index!==b){throw new TypeError("invalid parameter format")}b+=a[0].length;d=a[1].toLowerCase();f=a[2];if(f[0]==='"'){f=f.substr(1,f.length-2).replace(qescRegExp,"$1")}g.parameters[d]=f}if(b!==-1&&b!==c.length){throw new TypeError("invalid parameter format")}return g}function getcontenttype(a){if(typeof a.getHeader==="function"){return a.getHeader("content-type")}if(typeof a.headers==="object"){return a.headers&&a.headers["content-type"]}}function qstring(b){var a=String(b);if(tokenRegExp.test(a)){return a}if(a.length>0&&!textRegExp.test(a)){throw new TypeError("invalid parameter value")}return'"'+a.replace(quoteRegExp,"\\$1")+'"'}function ContentType(a){this.parameters=Object.create(null);this.type=a};