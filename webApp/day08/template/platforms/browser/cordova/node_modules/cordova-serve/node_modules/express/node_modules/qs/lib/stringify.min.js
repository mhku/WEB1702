var Utils=require("./utils");var internals={delimiter:"&",arrayPrefixGenerators:{brackets:function(b,a){return b+"[]"},indices:function(b,a){return b+"["+a+"]"},repeat:function(b,a){return b}},strictNullHandling:false};internals.stringify=function(e,g,a,c,b){if(typeof b==="function"){e=b(g,e)}else{if(Utils.isBuffer(e)){e=e.toString()}else{if(e instanceof Date){e=e.toISOString()}else{if(e===null){if(c){return Utils.encode(g)}e=""}}}}if(typeof e==="string"||typeof e==="number"||typeof e==="boolean"){return[Utils.encode(g)+"="+Utils.encode(e)]}var k=[];if(typeof e==="undefined"){return k}var d=Array.isArray(b)?b:Object.keys(e);for(var f=0,h=d.length;f<h;++f){var j=d[f];if(Array.isArray(e)){k=k.concat(internals.stringify(e[j],a(g,j),a,c,b))}else{k=k.concat(internals.stringify(e[j],g+"["+j+"]",a,c,b))}}return k};module.exports=function(h,m){m=m||{};var c=typeof m.delimiter==="undefined"?internals.delimiter:m.delimiter;var e=typeof m.strictNullHandling==="boolean"?m.strictNullHandling:internals.strictNullHandling;var g;var d;if(typeof m.filter==="function"){d=m.filter;h=d("",h)}else{if(Array.isArray(m.filter)){g=d=m.filter}}var l=[];if(typeof h!=="object"||h===null){return""}var a;if(m.arrayFormat in internals.arrayPrefixGenerators){a=m.arrayFormat}else{if("indices" in m){a=m.indices?"indices":"repeat"}else{a="indices"}}var b=internals.arrayPrefixGenerators[a];if(!g){g=Object.keys(h)}for(var f=0,j=g.length;f<j;++f){var k=g[f];l=l.concat(internals.stringify(h[k],k,b,e,d))}return l.join(c)};