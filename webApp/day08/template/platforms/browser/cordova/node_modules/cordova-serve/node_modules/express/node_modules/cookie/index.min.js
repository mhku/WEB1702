/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */
;exports.parse=parse;exports.serialize=serialize;var decode=decodeURIComponent;var encode=encodeURIComponent;var fieldContentRegExp=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function parse(e,a){if(typeof e!=="string"){throw new TypeError("argument str must be a string")}var d={};var b=a||{};var c=e.split(/; */);var f=b.decode||decode;c.forEach(function(j){var h=j.indexOf("=");if(h<0){return}var g=j.substr(0,h).trim();var i=j.substr(++h,j.length).trim();if('"'==i[0]){i=i.slice(1,-1)}if(undefined==d[g]){d[g]=tryDecode(i,f)}});return d}function serialize(d,h,c){var e=c||{};var a=e.encode||encode;if(!fieldContentRegExp.test(d)){throw new TypeError("argument name is invalid")}var g=a(h);if(g&&!fieldContentRegExp.test(g)){throw new TypeError("argument val is invalid")}var f=[d+"="+g];if(null!=e.maxAge){var b=e.maxAge-0;if(isNaN(b)){throw new Error("maxAge should be a Number")}f.push("Max-Age="+b)}if(e.domain){if(!fieldContentRegExp.test(e.domain)){throw new TypeError("option domain is invalid")}f.push("Domain="+e.domain)}if(e.path){if(!fieldContentRegExp.test(e.path)){throw new TypeError("option path is invalid")}f.push("Path="+e.path)}if(e.expires){f.push("Expires="+e.expires.toUTCString())}if(e.httpOnly){f.push("HttpOnly")}if(e.secure){f.push("Secure")}return f.join("; ")}function tryDecode(c,b){try{return b(c)}catch(a){return c}};