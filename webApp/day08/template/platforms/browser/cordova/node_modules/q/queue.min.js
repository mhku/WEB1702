var Q=require("./q");module.exports=Queue;function Queue(){var a=Q.defer();var b=Q.defer();return{put:function(d){var c=Q.defer();a.resolve({head:d,tail:c.promise});a.resolve=c.resolve},get:function(){var c=a.promise.get("head");a.promise=a.promise.get("tail");return c.fail(function(d){b.resolve(d);throw d})},closed:b.promise,close:function(d){d=d||new Error("Can't get value from closed queue");var c={head:Q.reject(d)};c.tail=c;a.resolve(c);return b.promise}}};