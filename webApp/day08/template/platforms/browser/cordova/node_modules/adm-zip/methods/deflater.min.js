function JSDeflater(aN){var bf=32768,O=0,bx=1,a0=2,al=6,bv=true,aT=32768,ak=64,i=1024*8,A=2*bf,be=3,r=258,aH=16,k=8192,bu=13,an=k,t=1<<bu,at=t-1,ah=bf-1,ax=0,aQ=4096,f=r+be+1,bi=bf-f,aI=1,X=15,g=7,br=29,R=256,bg=256,az=R+1+br,aY=30,d=19,p=16,aC=17,V=18,bh=2*az+1,bq=parseInt((bu+be-1)/be);var am,af,aa,e,bz=null,bB,aB,bb,ay,a,ba,v,av,C,m,bC,Y,aM,aL,ad,T,a6,aA,x,z,N,bm,a3,o,I,b,L,aR,bn,ab,aG,aK,ag,aw,aj,y,bD,J,n,l,bA,F,a7,aS,S,aO,bl,aW,a2,H,bj,bE;var aX=function(){this.fc=0;this.dl=0};var aP=function(){this.dyn_tree=null;this.static_tree=null;this.extra_bits=null;this.extra_base=0;this.elems=0;this.max_length=0;this.max_code=0};var bc=function(bG,bF,bI,bH){this.good_length=bG;this.max_lazy=bF;this.nice_length=bI;this.max_chain=bH};var a8=function(){this.next=null;this.len=0;this.ptr=new Array(i);this.off=0};var aZ=new Array(0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0);var bw=new Array(0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13);var aJ=new Array(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7);var u=new Array(16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15);var bs=new Array(new bc(0,0,0,0),new bc(4,4,8,4),new bc(4,5,16,8),new bc(4,6,32,32),new bc(4,4,16,16),new bc(8,16,32,32),new bc(8,16,128,128),new bc(8,32,128,256),new bc(32,128,258,1024),new bc(32,258,258,4096));var c=function(bG){var bF;if(!bG){bG=al}else{if(bG<1){bG=1}else{if(bG>9){bG=9}}}a3=bG;e=false;x=false;if(bz!=null){return}am=af=aa=null;bz=new Array(i);ay=new Array(A);a=new Array(an);ba=new Array(aT+ak);v=new Array(1<<aH);b=new Array(bh);for(bF=0;bF<bh;bF++){b[bF]=new aX()}L=new Array(2*aY+1);for(bF=0;bF<2*aY+1;bF++){L[bF]=new aX()}aR=new Array(az+2);for(bF=0;bF<az+2;bF++){aR[bF]=new aX()}bn=new Array(aY);for(bF=0;bF<aY;bF++){bn[bF]=new aX()}ab=new Array(2*d+1);for(bF=0;bF<2*d+1;bF++){ab[bF]=new aX()}aG=new aP();aK=new aP();ag=new aP();aw=new Array(X+1);aj=new Array(2*az+1);J=new Array(2*az+1);n=new Array(r-be+1);l=new Array(512);bA=new Array(br);F=new Array(aY);a7=new Array(parseInt(k/8))};var a5=function(){am=af=aa=null;bz=null;ay=null;a=null;ba=null;v=null;b=null;L=null;aR=null;bn=null;ab=null;aG=null;aK=null;ag=null;aw=null;aj=null;J=null;n=null;l=null;bA=null;F=null;a7=null};var h=function(bF){bF.next=am;am=bF};var B=function(){var bF;if(am!=null){bF=am;am=am.next}else{bF=new a8()}bF.next=null;bF.len=bF.off=0;return bF};var E=function(bF){return v[bf+bF]};var D=function(bF,bG){return v[bf+bF]=bG};var a1=function(bF){bz[aB+bB++]=bF;if(aB+bB==i){aq()}};var ao=function(bF){bF&=65535;if(aB+bB<i-2){bz[aB+bB++]=(bF&255);bz[aB+bB++]=(bF>>>8)}else{a1(bF&255);a1(bF>>>8)}};var ar=function(){bC=((bC<<bq)^(ay[a6+be-1]&255))&at;Y=E(bC);v[a6&ah]=Y;D(bC,a6)};var M=function(bG,bF){P(bF[bG].fc,bF[bG].dl)};var G=function(bF){return(bF<256?l[bF]:l[256+(bF>>7)])&255};var aE=function(bG,bH,bF){return bG[bH].fc<bG[bF].fc||(bG[bH].fc==bG[bF].fc&&J[bH]<=J[bF])};var Z=function(bI,bG,bH){var bF;for(bF=0;bF<bH&&bE<bj.length;bF++){bI[bG+bF]=bj[bE++]&255}return bF};var a4=function(){var bF;for(bF=0;bF<t;bF++){v[bf+bF]=0}bm=bs[a3].max_lazy;o=bs[a3].good_length;if(!bv){I=bs[a3].nice_length}N=bs[a3].max_chain;a6=0;m=0;z=Z(ay,0,2*bf);if(z<=0){x=true;z=0;return}x=false;while(z<f&&!x){ap()}bC=0;for(bF=0;bF<be-1;bF++){bC=((bC<<bq)^(ay[bF]&255))&at}};var Q=function(bK){var bM=N;var bH=a6;var bI;var bL;var bG=T;var bJ=(a6>bi?a6-bi:ax);var bF=a6+r;var bO=ay[bH+bG-1];var bN=ay[bH+bG];if(T>=o){bM>>=2}do{bI=bK;if(ay[bI+bG]!=bN||ay[bI+bG-1]!=bO||ay[bI]!=ay[bH]||ay[++bI]!=ay[bH+1]){continue}bH+=2;bI++;do{}while(ay[++bH]==ay[++bI]&&ay[++bH]==ay[++bI]&&ay[++bH]==ay[++bI]&&ay[++bH]==ay[++bI]&&ay[++bH]==ay[++bI]&&ay[++bH]==ay[++bI]&&ay[++bH]==ay[++bI]&&ay[++bH]==ay[++bI]&&bH<bF);bL=r-(bF-bH);bH=bF-r;if(bL>bG){aA=bK;bG=bL;if(bv){if(bL>=r){break}}else{if(bL>=I){break}}bO=ay[bH+bG-1];bN=ay[bH+bG]}}while((bK=v[bK&ah])>bJ&&--bM!=0);return bG};var ap=function(){var bH,bF;var bG=A-z-a6;if(bG==-1){bG--}else{if(a6>=bf+bi){for(bH=0;bH<bf;bH++){ay[bH]=ay[bH+bf]}aA-=bf;a6-=bf;m-=bf;for(bH=0;bH<t;bH++){bF=E(bH);D(bH,bF>=bf?bF-bf:ax)}for(bH=0;bH<bf;bH++){bF=v[bH];v[bH]=(bF>=bf?bF-bf:ax)}bG+=bf}}if(!x){bH=Z(ay,a6+z,bG);if(bH<=0){x=true}else{z+=bH}}};var U=function(){while(z!=0&&af==null){var bF;ar();if(Y!=ax&&a6-Y<=bi){ad=Q(Y);if(ad>z){ad=z}}if(ad>=be){bF=aF(a6-aA,ad-be);z-=ad;if(ad<=bm){ad--;do{a6++;ar()}while(--ad!=0);a6++}else{a6+=ad;ad=0;bC=ay[a6]&255;bC=((bC<<bq)^(ay[a6+1]&255))&at}}else{bF=aF(0,ay[a6]&255);z--;a6++}if(bF){ac(0);m=a6}while(z<f&&!x){ap()}}};var ai=function(){while(z!=0&&af==null){ar();T=ad;aM=aA;ad=be-1;if(Y!=ax&&T<bm&&a6-Y<=bi){ad=Q(Y);if(ad>z){ad=z}if(ad==be&&a6-aA>aQ){ad--}}if(T>=be&&ad<=T){var bF;bF=aF(a6-1-aM,T-be);z-=T-1;T-=2;do{a6++;ar()}while(--T!=0);aL=0;ad=be-1;a6++;if(bF){ac(0);m=a6}}else{if(aL!=0){if(aF(0,ay[a6-1]&255)){ac(0);m=a6}a6++;z--}else{aL=1;a6++;z--}}while(z<f&&!x){ap()}}};var bt=function(){if(x){return}av=0;C=0;a9();a4();af=null;bB=0;aB=0;aL=0;if(a3<=3){T=be-1;ad=0}else{ad=be-1;aL=0;aL=0}bb=false};var K=function(bI,bG,bF){var bH;if(!e){bt();e=true;if(z==0){bb=true;return 0}}if((bH=by(bI,bG,bF))==bF){return bF}if(bb){return bH}if(a3<=3){U()}else{ai()}if(z==0){if(aL!=0){aF(0,ay[a6-1]&255)}ac(1);bb=true}return bH+by(bI,bH+bG,bF-bH)};var by=function(bL,bJ,bG){var bK,bH,bF;bK=0;while(af!=null&&bK<bG){bH=bG-bK;if(bH>af.len){bH=af.len}for(bF=0;bF<bH;bF++){bL[bJ+bK+bF]=af.ptr[af.off+bF]}af.off+=bH;af.len-=bH;bK+=bH;if(af.len==0){var bI;bI=af;af=af.next;h(bI)}}if(bK==bG){return bK}if(aB<bB){bH=bG-bK;if(bH>bB-aB){bH=bB-aB}for(bF=0;bF<bH;bF++){bL[bJ+bK+bF]=bz[aB+bF]}aB+=bH;bK+=bH;if(bB==aB){bB=aB=0}}return bK};var a9=function(){var bJ;var bH;var bG;var bF;var bI;if(bn[0].dl!=0){return}aG.dyn_tree=b;aG.static_tree=aR;aG.extra_bits=aZ;aG.extra_base=R+1;aG.elems=az;aG.max_length=X;aG.max_code=0;aK.dyn_tree=L;aK.static_tree=bn;aK.extra_bits=bw;aK.extra_base=0;aK.elems=aY;aK.max_length=X;aK.max_code=0;ag.dyn_tree=ab;ag.static_tree=null;ag.extra_bits=aJ;ag.extra_base=0;ag.elems=d;ag.max_length=g;ag.max_code=0;bG=0;for(bF=0;bF<br-1;bF++){bA[bF]=bG;for(bJ=0;bJ<(1<<aZ[bF]);bJ++){n[bG++]=bF}}n[bG-1]=bF;bI=0;for(bF=0;bF<16;bF++){F[bF]=bI;for(bJ=0;bJ<(1<<bw[bF]);bJ++){l[bI++]=bF}}bI>>=7;for(;bF<aY;bF++){F[bF]=bI<<7;for(bJ=0;bJ<(1<<(bw[bF]-7));bJ++){l[256+bI++]=bF}}for(bH=0;bH<=X;bH++){aw[bH]=0}bJ=0;while(bJ<=143){aR[bJ++].dl=8;aw[8]++}while(bJ<=255){aR[bJ++].dl=9;aw[9]++}while(bJ<=279){aR[bJ++].dl=7;aw[7]++}while(bJ<=287){aR[bJ++].dl=8;aw[8]++}aD(aR,az+1);for(bJ=0;bJ<aY;bJ++){bn[bJ].dl=5;bn[bJ].fc=w(bJ,5)}bo()};var bo=function(){var bF;for(bF=0;bF<az;bF++){b[bF].fc=0}for(bF=0;bF<aY;bF++){L[bF].fc=0}for(bF=0;bF<d;bF++){ab[bF].fc=0}b[bg].fc=1;a2=H=0;aS=S=aO=0;bl=0;aW=1};var W=function(bF,bH){var bG=aj[bH];var bI=bH<<1;while(bI<=y){if(bI<y&&aE(bF,aj[bI+1],aj[bI])){bI++}if(aE(bF,bG,aj[bI])){break}aj[bH]=aj[bI];bH=bI;bI<<=1}aj[bH]=bG};var aU=function(bN){var bS=bN.dyn_tree;var bI=bN.extra_bits;var bF=bN.extra_base;var bO=bN.max_code;var bQ=bN.max_length;var bR=bN.static_tree;var bL;var bG,bH;var bP;var bK;var bM;var bJ=0;for(bP=0;bP<=X;bP++){aw[bP]=0}bS[aj[bD]].dl=0;for(bL=bD+1;bL<bh;bL++){bG=aj[bL];bP=bS[bS[bG].dl].dl+1;if(bP>bQ){bP=bQ;bJ++}bS[bG].dl=bP;if(bG>bO){continue}aw[bP]++;bK=0;if(bG>=bF){bK=bI[bG-bF]}bM=bS[bG].fc;a2+=bM*(bP+bK);if(bR!=null){H+=bM*(bR[bG].dl+bK)}}if(bJ==0){return}do{bP=bQ-1;while(aw[bP]==0){bP--}aw[bP]--;aw[bP+1]+=2;aw[bQ]--;bJ-=2}while(bJ>0);for(bP=bQ;bP!=0;bP--){bG=aw[bP];while(bG!=0){bH=aj[--bL];if(bH>bO){continue}if(bS[bH].dl!=bP){a2+=(bP-bS[bH].dl)*bS[bH].fc;bS[bH].fc=bP}bG--}}};var aD=function(bG,bL){var bI=new Array(X+1);var bH=0;var bJ;var bK;for(bJ=1;bJ<=X;bJ++){bH=((bH+aw[bJ-1])<<1);bI[bJ]=bH}for(bK=0;bK<=bL;bK++){var bF=bG[bK].dl;if(bF==0){continue}bG[bK].fc=w(bI[bF]++,bF)}};var bp=function(bK){var bN=bK.dyn_tree;var bM=bK.static_tree;var bF=bK.elems;var bG,bI;var bL=-1;var bH=bF;y=0;bD=bh;for(bG=0;bG<bF;bG++){if(bN[bG].fc!=0){aj[++y]=bL=bG;J[bG]=0}else{bN[bG].dl=0}}while(y<2){var bJ=aj[++y]=(bL<2?++bL:0);bN[bJ].fc=1;J[bJ]=0;a2--;if(bM!=null){H-=bM[bJ].dl}}bK.max_code=bL;for(bG=y>>1;bG>=1;bG--){W(bN,bG)}do{bG=aj[aI];aj[aI]=aj[y--];W(bN,aI);bI=aj[aI];aj[--bD]=bG;aj[--bD]=bI;bN[bH].fc=bN[bG].fc+bN[bI].fc;if(J[bG]>J[bI]+1){J[bH]=J[bG]}else{J[bH]=J[bI]+1}bN[bG].dl=bN[bI].dl=bH;aj[aI]=bH++;W(bN,aI)}while(y>=2);aj[--bD]=aj[aI];aU(bK);aD(bN,bL)};var q=function(bN,bM){var bG;var bK=-1;var bF;var bI=bN[0].dl;var bJ=0;var bH=7;var bL=4;if(bI==0){bH=138;bL=3}bN[bM+1].dl=65535;for(bG=0;bG<=bM;bG++){bF=bI;bI=bN[bG+1].dl;if(++bJ<bH&&bF==bI){continue}else{if(bJ<bL){ab[bF].fc+=bJ}else{if(bF!=0){if(bF!=bK){ab[bF].fc++}ab[p].fc++}else{if(bJ<=10){ab[aC].fc++}else{ab[V].fc++}}}}bJ=0;bK=bF;if(bI==0){bH=138;bL=3}else{if(bF==bI){bH=6;bL=3}else{bH=7;bL=4}}}};var bk=function(bN,bM){var bG;var bK=-1;var bF;var bI=bN[0].dl;var bJ=0;var bH=7;var bL=4;if(bI==0){bH=138;bL=3}for(bG=0;bG<=bM;bG++){bF=bI;bI=bN[bG+1].dl;if(++bJ<bH&&bF==bI){continue}else{if(bJ<bL){do{M(bF,ab)}while(--bJ!=0)}else{if(bF!=0){if(bF!=bK){M(bF,ab);bJ--}M(p,ab);P(bJ-3,2)}else{if(bJ<=10){M(aC,ab);P(bJ-3,3)}else{M(V,ab);P(bJ-11,7)}}}}bJ=0;bK=bF;if(bI==0){bH=138;bL=3}else{if(bF==bI){bH=6;bL=3}else{bH=7;bL=4}}}};var s=function(){var bF;q(b,aG.max_code);q(L,aK.max_code);bp(ag);for(bF=d-1;bF>=3;bF--){if(ab[u[bF]].dl!=0){break}}a2+=3*(bF+1)+5+5+4;return bF};var j=function(bG,bF,bH){var bI;P(bG-257,5);P(bF-1,5);P(bH-4,4);for(bI=0;bI<bH;bI++){P(ab[u[bI]].dl,3)}bk(b,bG-1);bk(L,bF-1)};var ac=function(bF){var bH,bG;var bJ;var bK;bK=a6-m;a7[aO]=bl;bp(aG);bp(aK);bJ=s();bH=(a2+3+7)>>3;bG=(H+3+7)>>3;if(bG<=bH){bH=bG}if(bK+4<=bH&&m>=0){var bI;P((O<<1)+bF,3);au();ao(bK);ao(~bK);for(bI=0;bI<bK;bI++){a1(ay[m+bI])}}else{if(bG==bH){P((bx<<1)+bF,3);bd(aR,bn)}else{P((a0<<1)+bF,3);j(aG.max_code+1,aK.max_code+1,bJ+1);bd(b,L)}}bo();if(bF!=0){au()}};var aF=function(bJ,bH){ba[aS++]=bH;if(bJ==0){b[bH].fc++}else{bJ--;b[n[bH]+R+1].fc++;L[G(bJ)].fc++;a[S++]=bJ;bl|=aW}aW<<=1;if((aS&7)==0){a7[aO++]=bl;bl=0;aW=1}if(a3>2&&(aS&4095)==0){var bF=aS*8;var bI=a6-m;var bG;for(bG=0;bG<aY;bG++){bF+=L[bG].fc*(5+bw[bG])}bF>>=3;if(S<parseInt(aS/2)&&bF<parseInt(bI/2)){return true}}return(aS==k-1||S==an)};var bd=function(bL,bJ){var bN;var bG;var bH=0;var bO=0;var bK=0;var bM=0;var bF;var bI;if(aS!=0){do{if((bH&7)==0){bM=a7[bK++]}bG=ba[bH++]&255;if((bM&1)==0){M(bG,bL)}else{bF=n[bG];M(bF+R+1,bL);bI=aZ[bF];if(bI!=0){bG-=bA[bF];P(bG,bI)}bN=a[bO++];bF=G(bN);M(bF,bJ);bI=bw[bF];if(bI!=0){bN-=F[bF];P(bN,bI)}}bM>>=1}while(bH<aS)}M(bg,bL)};var aV=16;var P=function(bG,bF){if(C>aV-bF){av|=(bG<<C);ao(av);av=(bG>>(aV-C));C+=bF-aV}else{av|=bG<<C;C+=bF}};var w=function(bH,bF){var bG=0;do{bG|=bH&1;bH>>=1;bG<<=1}while(--bF>0);return bG>>1};var au=function(){if(C>8){ao(av)}else{if(C>0){a1(av)}}av=0;C=0};var aq=function(){if(bB!=0){var bG,bF;bG=B();if(af==null){af=aa=bG}else{aa=aa.next=bG}bG.len=bB-aB;for(bF=0;bF<bG.len;bF++){bG.ptr[bF]=bz[aB+bF]}bB=aB=0}};function ae(bG,bF){bj=bG;bE=0;c(bF);var bM=new Array(1024),bI=[],bL=0,bJ;for(bJ=0;bJ<1024;bJ++){bM[bJ]=0}while((bJ=K(bM,0,bM.length))>0){var bH=new Buffer(bM.slice(0,bJ));bI.push(bH);bL+=bH.length}if(bI.length==1){return bI[0]}var bN=new Buffer(bL),bK=0;for(bJ=0;bJ<bI.length;bJ++){bI[bJ].copy(bN,bK);bK=bK+bI[bJ].length}return bN}return{deflate:function(){return ae(aN,8)}}}module.exports=function(b){var a=require("zlib");return{deflate:function(){return new JSDeflater(b).deflate()},deflateAsync:function(f){var c=a.createDeflateRaw({chunkSize:(parseInt(b.length/1024)+1)*1024}),e=[],d=0;c.on("data",function(g){e.push(g);d+=g.length});c.on("end",function(){var j=new Buffer(d),g=0;j.fill(0);for(var k=0;k<e.length;k++){var h=e[k];h.copy(j,g);g+=h.length}f&&f(j)});c.end(b)}}};