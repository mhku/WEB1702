cordova.define("cordova-plugin-file-transfer.FileTransfer",function(d,h,a){var m=d("cordova/argscheck"),f=d("cordova/exec"),i=d("./FileTransferError"),c=d("cordova-plugin-file.ProgressEvent");function k(n){var o=new c();o.lengthComputable=n.lengthComputable;o.loaded=n.loaded;o.total=n.total;return o}function l(p){var o=/^https?\:\/\/(?:(?:(([^:@\/]*)(?::([^@\/]*))?)?@)?([^:\/?#]*)(?::(\d*))?).*$/,n=o.exec(p);return n&&n[1]}function e(q){var r=null;if(window.btoa){var p=l(q);if(p){var o="Authorization";var n="Basic "+window.btoa(p);r={name:o,value:n}}}return r}function g(p){var n=[];for(var q in p){if(p.hasOwnProperty(q)){var o=p[q];n.push({name:q,value:o.toString()})}}return n}var b=0;var j=function(){this._id=++b;this.onprogress=null};j.prototype.upload=function(t,s,p,y,D,x){m.checkArgs("ssFFO*","FileTransfer.upload",arguments);var A=null;var v=null;var o=null;var u=null;var C=true;var q=null;var n=null;var w=e(s);if(w){s=s.replace(l(s)+"@","");D=D||{};D.headers=D.headers||{};D.headers[w.name]=w.value}if(D){A=D.fileKey;v=D.fileName;o=D.mimeType;q=D.headers;n=D.httpMethod||"POST";if(n.toUpperCase()=="PUT"){n="PUT"}else{n="POST"}if(D.chunkedMode!==null||typeof D.chunkedMode!="undefined"){C=D.chunkedMode}if(D.params){u=D.params}else{u={}}}if(cordova.platformId==="windowsphone"){q=q&&g(q);u=u&&g(u)}var r=y&&function(F){var E=new i(F.code,F.source,F.target,F.http_status,F.body,F.exception);y(E)};var B=this;var z=function(E){if(typeof E.lengthComputable!="undefined"){if(B.onprogress){B.onprogress(k(E))}}else{if(p){p(E)}}};f(z,r,"FileTransfer","upload",[t,s,A,v,o,u,x,C,q,this._id,n])};j.prototype.download=function(n,v,o,t,s,x){m.checkArgs("ssFF*","FileTransfer.download",arguments);var w=this;var r=e(n);if(r){n=n.replace(l(n)+"@","");x=x||{};x.headers=x.headers||{};x.headers[r.name]=r.value}var p=null;if(x){p=x.headers||null}if(cordova.platformId==="windowsphone"&&p){p=g(p)}var u=function(y){if(typeof y.lengthComputable!="undefined"){if(w.onprogress){return w.onprogress(k(y))}}else{if(o){var z=null;if(y.isDirectory){z=new (d("cordova-plugin-file.DirectoryEntry"))()}else{if(y.isFile){z=new (d("cordova-plugin-file.FileEntry"))()}}z.isDirectory=y.isDirectory;z.isFile=y.isFile;z.name=y.name;z.fullPath=y.fullPath;z.filesystem=new FileSystem(y.filesystemName||(y.filesystem==window.PERSISTENT?"persistent":"temporary"));z.nativeURL=y.nativeURL;o(z)}}};var q=t&&function(z){var y=new i(z.code,z.source,z.target,z.http_status,z.body,z.exception);t(y)};f(u,q,"FileTransfer","download",[n,v,s,this._id,p])};j.prototype.abort=function(){f(null,null,"FileTransfer","abort",[this._id])};a.exports=j});