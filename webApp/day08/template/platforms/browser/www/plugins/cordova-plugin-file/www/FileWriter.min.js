cordova.define("cordova-plugin-file.FileWriter",function(c,b,e){var a=c("cordova/exec"),g=c("./FileError"),f=c("./ProgressEvent");var d=function(h){this.fileName="";this.length=0;if(h){this.localURL=h.localURL||h;this.length=h.size||0}this.position=0;this.readyState=0;this.result=null;this.error=null;this.onwritestart=null;this.onprogress=null;this.onwrite=null;this.onwriteend=null;this.onabort=null;this.onerror=null};d.INIT=0;d.WRITING=1;d.DONE=2;d.prototype.abort=function(){if(this.readyState===d.DONE||this.readyState===d.INIT){throw new g(g.INVALID_STATE_ERR)}this.error=new g(g.ABORT_ERR);this.readyState=d.DONE;if(typeof this.onabort==="function"){this.onabort(new f("abort",{target:this}))}if(typeof this.onwriteend==="function"){this.onwriteend(new f("writeend",{target:this}))}};d.prototype.write=function(m,n){var k=this;var o=(typeof window.Blob!=="undefined"&&typeof window.ArrayBuffer!=="undefined");var i=(cordova.platformId==="windows8"||cordova.platformId==="windows");var l;if(m instanceof File||(!i&&o&&m instanceof Blob)){var h=new FileReader();h.onload=function(){d.prototype.write.call(k,this.result,true)};h.onerror=function(){k.readyState=d.DONE;k.error=this.error;if(typeof k.onerror==="function"){k.onerror(new f("error",{target:k}))}if(typeof k.onwriteend==="function"){k.onwriteend(new f("writeend",{target:k}))}};this.readyState=d.WRITING;if(o){h.readAsArrayBuffer(m)}else{h.readAsText(m)}return}l=o&&(m instanceof ArrayBuffer);if(l&&cordova.platformId==="windowsphone"){m=Array.apply(null,new Uint8Array(m))}if(this.readyState===d.WRITING&&!n){throw new g(g.INVALID_STATE_ERR)}this.readyState=d.WRITING;var j=this;if(typeof j.onwritestart==="function"){j.onwritestart(new f("writestart",{target:j}))}a(function(p){if(j.readyState===d.DONE){return}j.position+=p;j.length=j.position;j.readyState=d.DONE;if(typeof j.onwrite==="function"){j.onwrite(new f("write",{target:j}))}if(typeof j.onwriteend==="function"){j.onwriteend(new f("writeend",{target:j}))}},function(p){if(j.readyState===d.DONE){return}j.readyState=d.DONE;j.error=new g(p);if(typeof j.onerror==="function"){j.onerror(new f("error",{target:j}))}if(typeof j.onwriteend==="function"){j.onwriteend(new f("writeend",{target:j}))}},"File","write",[this.localURL,m,this.position,l])};d.prototype.seek=function(h){if(this.readyState===d.WRITING){throw new g(g.INVALID_STATE_ERR)}if(!h&&h!==0){return}if(h<0){this.position=Math.max(h+this.length,0)}else{if(h>this.length){this.position=this.length}else{this.position=h}}};d.prototype.truncate=function(h){if(this.readyState===d.WRITING){throw new g(g.INVALID_STATE_ERR)}this.readyState=d.WRITING;var i=this;if(typeof i.onwritestart==="function"){i.onwritestart(new f("writestart",{target:this}))}a(function(j){if(i.readyState===d.DONE){return}i.readyState=d.DONE;i.length=j;i.position=Math.min(i.position,j);if(typeof i.onwrite==="function"){i.onwrite(new f("write",{target:i}))}if(typeof i.onwriteend==="function"){i.onwriteend(new f("writeend",{target:i}))}},function(j){if(i.readyState===d.DONE){return}i.readyState=d.DONE;i.error=new g(j);if(typeof i.onerror==="function"){i.onerror(new f("error",{target:i}))}if(typeof i.onwriteend==="function"){i.onwriteend(new f("writeend",{target:i}))}},"File","truncate",[this.localURL,h])};e.exports=d});