var exec=require("cordova/exec"),FileError=require("./FileError"),ProgressEvent=require("./ProgressEvent");function write(d){var g=this;var h=(typeof window.Blob!=="undefined"&&typeof window.ArrayBuffer!=="undefined");var a;if(d instanceof File||(h&&d instanceof Blob)){var b=new FileReader();b.onload=function(){FileWriter.prototype.write.call(g,this.result)};if(h){b.readAsArrayBuffer(d)}else{b.readAsText(d)}return}a=h&&(d instanceof ArrayBuffer);if(this.readyState===FileWriter.WRITING){throw new FileError(FileError.INVALID_STATE_ERR)}this.readyState=FileWriter.WRITING;var j=this;if(typeof j.onwritestart==="function"){j.onwritestart(new ProgressEvent("writestart",{target:j}))}if(d instanceof ArrayBuffer||d.buffer instanceof ArrayBuffer){d=new Uint8Array(d);var c="";for(var e=0;e<d.byteLength;e++){c+=String.fromCharCode(d[e])}d=c}var f="file://localhost";var k=this.localURL;if(k.substr(0,f.length)==f){k=k.substr(f.length)}exec(function(i){if(j.readyState===FileWriter.DONE){return}j.position+=i;j.length=j.position;j.readyState=FileWriter.DONE;if(typeof j.onwrite==="function"){j.onwrite(new ProgressEvent("write",{target:j}))}if(typeof j.onwriteend==="function"){j.onwriteend(new ProgressEvent("writeend",{target:j}))}},function(i){if(j.readyState===FileWriter.DONE){return}j.readyState=FileWriter.DONE;j.error=new FileError(i);if(typeof j.onerror==="function"){j.onerror(new ProgressEvent("error",{target:j}))}if(typeof j.onwriteend==="function"){j.onwriteend(new ProgressEvent("writeend",{target:j}))}},"File","write",[k,d,this.position,a])}module.exports={write:write};require("cordova/exec/proxy").add("FileWriter",module.exports);