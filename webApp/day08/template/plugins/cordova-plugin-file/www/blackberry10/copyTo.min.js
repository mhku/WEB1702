var resolve=cordova.require("cordova-plugin-file.resolveLocalFileSystemURIProxy"),requestAnimationFrame=cordova.require("cordova-plugin-file.bb10RequestAnimationFrame");module.exports=function(m,d,j,e){var c=j[0],k=j[1],f=j[2],h;function i(){resolve(function(n){if(typeof(m)==="function"){m(n)}},a,[k+h.name])}function a(n){if(typeof(d)==="function"){if(n&&n.code){if(c===k){d(FileError.INVALID_MODIFICATION_ERR)}else{if(n.code===FileError.SECURITY_ERR){d(FileError.INVALID_MODIFICATION_ERR)}else{d(n.code)}}}else{d(n)}}}function g(p,n,o){h=p;p.createWriter(function(q){q.onwriteend=function(){if(e){o.nativeEntry.remove(i,function(){console.error("Move operation failed. Files may exist at both source and destination")})}else{i()}};q.onerror=a;q.write(n)},a)}function l(n){if(n.nativeEntry.file){n.nativeEntry.file(function(p){var o=new FileReader()._realReader;o.onloadend=function(s){var r=new Uint8Array(this.result),q=new Blob([r]);resolve(function(t){requestAnimationFrame(function(){t.nativeEntry.getFile(f,{create:true},function(u){g(u,q,n)},a)})},a,[k])};o.onerror=a;o.readAsArrayBuffer(p)},a)}else{a(FileError.INVALID_MODIFICATION_ERR)}}function b(n){resolve(function(o){if(n.filesystemName!==o.filesystemName){console.error("Copying directories between filesystems is not supported on BB10");a(FileError.INVALID_MODIFICATION_ERR)}else{n.nativeEntry.copyTo(o.nativeEntry,f,function(){resolve(function(p){h=p;if(e){n.nativeEntry.removeRecursively(i,a)}else{i()}},a,[k+f])},a)}},a,[k])}if(k+f===c){a(FileError.INVALID_MODIFICATION_ERR)}else{if(f.indexOf(":")>-1){a(FileError.ENCODING_ERR)}else{resolve(function(n){if(n.isDirectory){b(n)}else{l(n)}},a,[c])}}};