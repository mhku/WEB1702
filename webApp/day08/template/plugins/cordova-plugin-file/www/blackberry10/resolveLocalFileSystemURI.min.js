var info=require("cordova-plugin-file.bb10FileSystemInfo"),requestAnimationFrame=cordova.require("cordova-plugin-file.bb10RequestAnimationFrame"),createEntryFromNative=require("cordova-plugin-file.bb10CreateEntryFromNative"),SANDBOXED=true,UNSANDBOXED=false;module.exports=function(f,a,c){var e=c[0],b=c[1],d=c[2];if(e){e=decodeURIComponent(e);if(e.indexOf("?")>-1){e=e.substring(0,e.indexOf("?"))}if(e.indexOf("file://localhost/")===0){e=e.replace("file://localhost/","file:///")}e=e.replace(info.persistentPath,"cdvfile://localhost/persistent");e=e.replace(info.temporaryPath,"cdvfile://localhost/temporary");if(e.indexOf("file:///")===0){resolveFile(f,a,e,b)}else{if(e.indexOf("cdvfile://localhost/")===0){resolveCdvFile(f,a,e,b,d)}else{if(e.indexOf("local:///")===0){resolveLocal(f,a,e,b)}else{a(FileError.ENCODING_ERR)}}}}else{a(FileError.NOT_FOUND_ERR)}};function resolveFile(e,a,c,b){var d=c.substring(7);resolve(e,a,d,window.PERSISTENT,UNSANDBOXED,b)}function resolveCdvFile(h,a,e,b,c){var d=/cdvfile:\/\/localhost\/([^\/]+)\/(.*)/.exec(e),g=d[1],f=d[2];if(g==="persistent"){resolve(h,a,f,window.PERSISTENT,SANDBOXED,b,c)}else{if(g==="temporary"){resolve(h,a,f,window.TEMPORARY,SANDBOXED,b,c)}else{if(g==="root"){resolve(h,a,f,window.PERSISTENT,UNSANDBOXED,b)}else{a(FileError.NOT_FOUND_ERR)}}}}function resolveLocal(e,a,c,b){var d=localPath+c.substring(8);resolve(e,a,d,window.PERSISTENT,UNSANDBOXED,b)}function resolve(g,b,e,f,a,c,d){c=c||{create:false};d=d||info.MAX_SIZE;if(d>info.MAX_SIZE){b(FileError.QUOTA_EXCEEDED_ERR)}else{if(e.indexOf(":")>-1){b(FileError.ENCODING_ERR)}else{requestAnimationFrame(function(){cordova.exec(function(){requestAnimationFrame(function(){resolveNative(g,b,e,f,c,d)})},b,"File","setSandbox",[a],false)})}}}function resolveNative(f,a,d,e,b,c){window.webkitRequestFileSystem(e,c,function(g){if(d===""){f(createEntryFromNative(g.root))}else{g.root.getFile(d,b,function(h){f(createEntryFromNative(h))},function(h){g.root.getDirectory(d,b,function(i){f(createEntryFromNative(i))},function(i){if(h.code===FileError.INVALID_MODIFICATION_ERR&&b.exclusive){a(FileError.PATH_EXISTS_ERR)}else{a(FileError.NOT_FOUND_ERR)}})})}})};