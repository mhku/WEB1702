var File=require("./File"),FileError=require("./FileError"),Flags=require("./Flags"),FileSystem=require("./FileSystem"),LocalFileSystem=require("./LocalFileSystem"),utils=require("cordova/utils");function Entry(f,e,d,c,b,a){this.isFile=!!f;this.isDirectory=!!e;this.name=d||"";this.fullPath=c||"";this.filesystemName=b||null;this.nativeURL=a||null}var FileEntry=function(d,c,b,a){FileEntry.__super__.constructor.apply(this,[true,false,d,c,b,a])};utils.extend(FileEntry,Entry);var DirectoryEntry=function(d,c,b,a){DirectoryEntry.__super__.constructor.call(this,false,true,d,c,b,a)};utils.extend(DirectoryEntry,Entry);var getFolderFromPathAsync=Windows.Storage.StorageFolder.getFolderFromPathAsync;var getFileFromPathAsync=Windows.Storage.StorageFile.getFileFromPathAsync;function writeBytesAsync(b,c,a){return b.openAsync(Windows.Storage.FileAccessMode.readWrite).then(function(d){d.seek(a);var e=new Windows.Storage.Streams.DataWriter(d);e.writeBytes(c);return e.storeAsync().then(function(f){d.size=a+f;return e.flushAsync().then(function(){d.close();return f})})})}function writeTextAsync(b,c,a){return b.openAsync(Windows.Storage.FileAccessMode.readWrite).then(function(d){d.seek(a);var e=new Windows.Storage.Streams.DataWriter(d);e.writeString(c);return e.storeAsync().then(function(f){d.size=a+f;return e.flushAsync().then(function(){d.close();return f})})})}function writeBlobAsync(b,c,a){return b.openAsync(Windows.Storage.FileAccessMode.readWrite).then(function(f){f.seek(a);var d=c.size;var e=(c.detachStream||c.msDetachStream).call(c);return Windows.Storage.Streams.RandomAccessStream.copyAsync(e,f).then(function(){f.size=a+d;return f.flushAsync().then(function(){e.close();f.close();return d})})})}function writeArrayBufferAsync(b,c,a){return writeBlobAsync(b,new Blob([c]),a)}function cordovaPathToNative(a){var b=a.replace(/\//g,"\\");b=b.replace(/\\+/g,"\\");return b}function nativePathToCordova(a){var b=a.replace(/\\/g,"/");return b}var driveRE=new RegExp("^[/]*([A-Z]:)");var invalidNameRE=/[\\?*|"<>:]/;function validName(a){return !invalidNameRE.test(a.replace(driveRE,""))}function sanitize(d){var c=new RegExp("/{2,}","g");var b=d.replace(c,"/").split(/\/+/);for(var a=0;a<b.length;++a){if(b[a]===".."){b.splice(a,1);if(a>0){b.splice(a-1,1);--a}}}return b.join("/")}var WinFS=function(b,a){this.winpath=a.winpath;if(this.winpath&&!/\/$/.test(this.winpath)){this.winpath+="/"}this.makeNativeURL=function(c){return FileSystem.encodeURIPath(this.root.nativeURL+sanitize(c.replace(":","%3A")))};a.fullPath="/";if(!a.nativeURL){a.nativeURL="file://"+sanitize(this.winpath+a.fullPath).replace(":","%3A")}WinFS.__super__.constructor.call(this,b,a)};utils.extend(WinFS,FileSystem);WinFS.prototype.__format__=function(a){var b=sanitize("/"+this.name+(a[0]==="/"?"":"/")+FileSystem.encodeURIPath(a));return"cdvfile://localhost"+b};var windowsPaths={dataDirectory:"ms-appdata:///local/",cacheDirectory:"ms-appdata:///temp/",tempDirectory:"ms-appdata:///temp/",syncedDataDirectory:"ms-appdata:///roaming/",applicationDirectory:"ms-appx:///",applicationStorageDirectory:"ms-appx:///"};var AllFileSystems;function getAllFS(){if(!AllFileSystems){AllFileSystems={persistent:Object.freeze(new WinFS("persistent",{name:"persistent",nativeURL:"ms-appdata:///local",winpath:nativePathToCordova(Windows.Storage.ApplicationData.current.localFolder.path)})),temporary:Object.freeze(new WinFS("temporary",{name:"temporary",nativeURL:"ms-appdata:///temp",winpath:nativePathToCordova(Windows.Storage.ApplicationData.current.temporaryFolder.path)})),root:Object.freeze(new WinFS("root",{name:"root",winpath:""}))}}return AllFileSystems}function getFS(a){return getAllFS()[a]}FileSystem.prototype.__format__=function(a){return getFS(this.name).__format__(a)};require("./fileSystems").getFs=function(a,b){setTimeout(function(){b(getFS(a))})};function getFilesystemFromPath(c){var b;var a=getAllFS();Object.keys(a).some(function(e){var d=a[e];if(c.indexOf(d.winpath)===0){b=d}return b});return b}var msapplhRE=new RegExp("^ms-appdata://localhost/");function pathFromURL(a){a=a.replace(msapplhRE,"ms-appdata:///");var b=decodeURIComponent(a);if(/\?/g.test(b)){b=String(b).split("?")[0]}if(b.indexOf("file:/")===0){if(b.indexOf("file://")!==0){a="file:///"+a.substr(6)}}["file://","ms-appdata:///","cdvfile://localhost/"].every(function(c){if(b.indexOf(c)!==0){return true}var d=b.indexOf("/",c.length);if(d<0){b=""}else{b=sanitize(b.substr(d))}});return b.replace(driveRE,"$1")}function getFilesystemFromURL(b){b=b.replace(msapplhRE,"ms-appdata:///");var c;if(b.indexOf("file:/")===0){c=getFilesystemFromPath(pathFromURL(b))}else{var a=getAllFS();Object.keys(a).every(function(e){var d=a[e];if(b.indexOf(d.root.nativeURL)===0||b.indexOf("cdvfile://localhost/"+d.name+"/")===0){c=d;return false}return true})}return c}function getFsPathForWinPath(a,b){var c=nativePathToCordova(b);if(c.indexOf(a.winpath)!==0){return null}return c.replace(a.winpath,"/")}var WinError={invalidArgument:-2147024809,fileNotFound:-2147024894,accessDenied:-2147024891};function openPath(b,a){a=a?a:{};return new WinJS.Promise(function(d,c){getFileFromPathAsync(b).done(function(e){d({file:e})},function(e){if(e.number!=WinError.fileNotFound&&e.number!=WinError.invalidArgument){c(FileError.NOT_READABLE_ERR)}getFolderFromPathAsync(b).done(function(f){if(!a.getContent){d({folder:f})}else{WinJS.Promise.join({files:f.getFilesAsync(),folders:f.getFoldersAsync()}).done(function(g){d({folder:f,files:g.files,folders:g.folders})},function(g){c(FileError.NOT_READABLE_ERR)})}},function(f){if(f.number==WinError.fileNotFound||f.number==WinError.invalidArgument){d({})}else{c(FileError.NOT_READABLE_ERR)}})})})}function copyFolder(b,c,a){a=a?a:b.name;return new WinJS.Promise(function(e,d){WinJS.Promise.join({fld:c.createFolderAsync(a,Windows.Storage.CreationCollisionOption.openIfExists),files:b.getFilesAsync(),folders:b.getFoldersAsync()}).done(function(h){if(!(h.files.length||h.folders.length)){e();return}var f=h.files.length;var g=function(){if(!(f--)){e();return}copyFolder(h.folders[f],c).done(function(){g()},d)};var i=function(){if(!(f--)){f=h.folders.length;g();return}h.files[f].copyAsync(h.fld).done(function(){i()},d)};i()},d)})}function moveFolder(b,c,a){a=a?a:b.name;return new WinJS.Promise(function(e,d){WinJS.Promise.join({fld:c.createFolderAsync(a,Windows.Storage.CreationCollisionOption.openIfExists),files:b.getFilesAsync(),folders:b.getFoldersAsync()}).done(function(h){if(!(h.files.length||h.folders.length)){e();return}var f=h.files.length;var i=function(){if(!(f--)){b.deleteAsync().done(e,d);return}moveFolder(h.folders[f],c).done(i,d)};var g=function(){if(!(f--)){f=h.folders.length;i();return}h.files[f].moveAsync(h.fld).done(function(){g()},d)};g()},d)})}function transport(o,g,k,e){var b=k[0];var n=k[1];var c=k[2];var m=getFilesystemFromURL(b);var i=getFilesystemFromURL(n);var f=pathFromURL(b);var l=pathFromURL(n);if(!(m&&i&&validName(c))){g(FileError.ENCODING_ERR);return}var a=cordovaPathToNative(sanitize(m.winpath+f));var d=cordovaPathToNative(sanitize(i.winpath+l));var h=sanitize(l+"/"+c);var j=cordovaPathToNative(sanitize(i.winpath+l+"/"+c));if(a==d||a==j){g(FileError.INVALID_MODIFICATION_ERR);return}WinJS.Promise.join({src:openPath(a),dst:openPath(d),tgt:openPath(j,{getContent:true})}).done(function(p){if((!p.dst.folder)||!(p.src.folder||p.src.file)){g(FileError.NOT_FOUND_ERR);return}if((p.src.folder&&p.tgt.file)||(p.src.file&&p.tgt.folder)||(p.tgt.folder&&(p.tgt.files.length||p.tgt.folders.length))){g(FileError.INVALID_MODIFICATION_ERR);return}if(p.src.file){e.fileOp(p.src.file,p.dst.folder,c,Windows.Storage.NameCollisionOption.replaceExisting).done(function(q){o(new FileEntry(c,h,i.name,i.makeNativeURL(h)))},function(q){g(FileError.INVALID_MODIFICATION_ERR)})}else{e.folderOp(p.src.folder,p.dst.folder,c).done(function(){o(new DirectoryEntry(c,h,i.name,i.makeNativeURL(h)))},function(){g(FileError.INVALID_MODIFICATION_ERR)})}},function(p){g(FileError.INVALID_MODIFICATION_ERR)})}module.exports={requestAllFileSystems:function(){return getAllFS()},requestAllPaths:function(a){a(windowsPaths)},getFileMetadata:function(c,a,b){module.exports.getMetadata(c,a,b)},getMetadata:function(h,b,d){var a=getFilesystemFromURL(d[0]);var g=pathFromURL(d[0]);if(!a||!validName(g)){b(FileError.ENCODING_ERR);return}var c=cordovaPathToNative(a.winpath+g);var e=function(i){i.getBasicPropertiesAsync().then(function(j){h(new File(i.name,i.path,i.fileType,j.dateModified,j.size))},function(){b(FileError.NOT_READABLE_ERR)})};var f=function(i){i.getBasicPropertiesAsync().then(function(k){var j={size:k.size,lastModifiedDate:k.dateModified};h(j)},function(){b(FileError.NOT_READABLE_ERR)})};getFileFromPathAsync(c).then(e,function(){getFolderFromPathAsync(c).then(f,function(){b(FileError.NOT_FOUND_ERR)})})},getParent:function(d,b,g){var c=getFilesystemFromURL(g[0]);var i=pathFromURL(g[0]);if(!c||!validName(i)){b(FileError.ENCODING_ERR);return}if(!i||(new RegExp("/[^/]*/?$")).test(i)){d(new DirectoryEntry(c.root.name,c.root.fullPath,c.name,c.makeNativeURL(c.root.fullPath)));return}var e=i.replace(new RegExp("/[^/]+/?$","g"),"");var f=i.substr(e.length);var a=cordovaPathToNative(c.winpath+e);var h=new DirectoryEntry(f,e,c.name,c.makeNativeURL(e));getFolderFromPathAsync(a).done(function(){d(h)},function(){b(FileError.INVALID_STATE_ERR)})},readAsText:function(g,d,j){var a=j[0],e=j[1],h=j[2],b=j[3];var f=getFilesystemFromURL(a);var k=pathFromURL(a);if(!f){d(FileError.ENCODING_ERR);return}var i=cordovaPathToNative(sanitize(f.winpath+k));var c=Windows.Storage.Streams.UnicodeEncoding.utf8;if(e=="Utf16LE"||e=="utf16LE"){c=Windows.Storage.Streams.UnicodeEncoding.utf16LE}else{if(e=="Utf16BE"||e=="utf16BE"){c=Windows.Storage.Streams.UnicodeEncoding.utf16BE}}getFileFromPathAsync(i).then(function(l){return l.openReadAsync()}).then(function(n){h=(h<0)?Math.max(n.size+h,0):Math.min(n.size,h);b=(b<0)?Math.max(b+n.size,0):Math.min(n.size,b);n.seek(h);var l=b-h,m=new Windows.Storage.Streams.Buffer(l);return n.readAsync(m,l,Windows.Storage.Streams.InputStreamOptions.none)}).done(function(l){try{g(Windows.Security.Cryptography.CryptographicBuffer.convertBinaryToString(c,l))}catch(m){d(FileError.ENCODING_ERR)}},function(){d(FileError.NOT_FOUND_ERR)})},readAsBinaryString:function(e,c,h){var a=h[0],f=h[1],b=h[2];var d=getFilesystemFromURL(a);var i=pathFromURL(a);if(!d){c(FileError.ENCODING_ERR);return}var g=cordovaPathToNative(sanitize(d.winpath+i));getFileFromPathAsync(g).then(function(j){Windows.Storage.FileIO.readBufferAsync(j).done(function(l){var m=Windows.Storage.Streams.DataReader.fromBuffer(l);var k=new Uint8Array(l.length),q="";m.readBytes(k);m.close();for(var n=0;n<k.length;n++){var p=k[n];var o=String.fromCharCode(p);q+=o}e(q.slice(f,b))})},function(){c(FileError.NOT_FOUND_ERR)})},readAsArrayBuffer:function(g,b,d){var c=d[0];var a=getFilesystemFromURL(c);var f=pathFromURL(c);if(!a){b(FileError.ENCODING_ERR);return}var e=cordovaPathToNative(sanitize(a.winpath+f));getFileFromPathAsync(e).then(function(j){var h=MSApp.createFileFromStorageFile(j);var i=URL.createObjectURL(h,{oneTimeOnly:true});var k=new XMLHttpRequest();k.open("GET",i,true);k.responseType="arraybuffer";k.onload=function(){var l=k.response;var o=d[1]||0,n=d[2]||l.length;if(o!==0||n!==l.length){if(l.slice){l=l.slice(o,n)}else{var q=new Uint8Array(l),r=new ArrayBuffer(n-o),m=new Uint8Array(r);for(var p=0;p<m.length;p++){m[p]=q[p+o]}l=r}}g(l)};k.send()},function(){b(FileError.NOT_FOUND_ERR)})},readAsDataURL:function(g,b,d){var c=d[0];var a=getFilesystemFromURL(c);var f=pathFromURL(c);if(!a){b(FileError.ENCODING_ERR);return}var e=cordovaPathToNative(sanitize(a.winpath+f));getFileFromPathAsync(e).then(function(h){Windows.Storage.FileIO.readBufferAsync(h).done(function(l){var k=Windows.Security.Cryptography.CryptographicBuffer.encodeToBase64String(l);if(String(k).substr(0,4)=="77u/"){k=k.substr(4)}var j=h.contentType;var i="data:"+j+";base64,"+k;g(i)})},function(){b(FileError.NOT_FOUND_ERR)})},getDirectory:function(g,b,j){var k=j[0];var l=j[1];var m=j[2];var f=getFilesystemFromURL(k);var e=pathFromURL(k);if(!f||!validName(l)){b(FileError.ENCODING_ERR);return}var d=sanitize(e+"/"+l);var c=sanitize(f.winpath+d);var a=c.substring(c.lastIndexOf("/")+1);var i=cordovaPathToNative(c.substring(0,c.lastIndexOf("/")));var h="";if(m){h=new Flags(m.create,m.exclusive)}else{h=new Flags(false,false)}getFolderFromPathAsync(i).done(function(n){if(h.create===true&&h.exclusive===true){n.createFolderAsync(a,Windows.Storage.CreationCollisionOption.failIfExists).done(function(o){g(new DirectoryEntry(o.name,d,f.name,f.makeNativeURL(d)))},function(o){b(FileError.PATH_EXISTS_ERR)})}else{if(h.create===true&&h.exclusive===false){n.createFolderAsync(a,Windows.Storage.CreationCollisionOption.openIfExists).done(function(o){g(new DirectoryEntry(o.name,d,f.name,f.makeNativeURL(d)))},function(){b(FileError.INVALID_MODIFICATION_ERR)})}else{if(h.create===false){n.getFolderAsync(a).done(function(o){g(new DirectoryEntry(o.name,d,f.name,f.makeNativeURL(d)))},function(){n.getFileAsync(a).done(function(){b(FileError.TYPE_MISMATCH_ERR)},function(){b(FileError.NOT_FOUND_ERR)})})}}}},function(){b(FileError.NOT_FOUND_ERR)})},remove:function(f,b,d){var a=getFilesystemFromURL(d[0]);var e=pathFromURL(d[0]);if(!a||!validName(e)){b(FileError.ENCODING_ERR);return}if(!e||e=="/"){b(FileError.NO_MODIFICATION_ALLOWED_ERR);return}var c=cordovaPathToNative(a.winpath+e);getFileFromPathAsync(c).then(function(g){g.deleteAsync().done(f,function(){b(FileError.INVALID_MODIFICATION_ERR)})},function(){getFolderFromPathAsync(c).done(function(g){g.getFilesAsync().then(function(h){if(h){if(h.length===0){return g.getFoldersAsync()}else{b(FileError.INVALID_MODIFICATION_ERR)}}}).done(function(h){if(h){if(h.length===0){g.deleteAsync().done(f,function(){b(FileError.INVALID_MODIFICATION_ERR)})}else{b(FileError.INVALID_MODIFICATION_ERR)}}})},function(){b(FileError.NOT_FOUND_ERR)})})},removeRecursively:function(b,c,e){var a=getFilesystemFromURL(e[0]);var f=pathFromURL(e[0]);if(!a||!validName(f)){c(FileError.ENCODING_ERR);return}if(!f||f=="/"){c(FileError.NO_MODIFICATION_ALLOWED_ERR);return}var d=cordovaPathToNative(a.winpath+f);getFolderFromPathAsync(d).done(function(g){g.deleteAsync().done(function(h){b(h)},function(h){c(h)})},function(){c(FileError.FILE_NOT_FOUND_ERR)})},getFile:function(g,a,j){var k=j[0];var l=j[1];var m=j[2];var f=getFilesystemFromURL(k);var e=pathFromURL(k);if(!f||!validName(l)){a(FileError.ENCODING_ERR);return}var c=sanitize(e+"/"+l);var b=sanitize(f.winpath+c);var d=b.substring(b.lastIndexOf("/")+1);var i=cordovaPathToNative(b.substring(0,b.lastIndexOf("/")));var h="";if(m!==null){h=new Flags(m.create,m.exclusive)}else{h=new Flags(false,false)}getFolderFromPathAsync(i).done(function(n){if(h.create===true&&h.exclusive===true){n.createFileAsync(d,Windows.Storage.CreationCollisionOption.failIfExists).done(function(o){g(new FileEntry(o.name,c,f.name,f.makeNativeURL(c)))},function(){a(FileError.PATH_EXISTS_ERR)})}else{if(h.create===true&&h.exclusive===false){n.createFileAsync(d,Windows.Storage.CreationCollisionOption.openIfExists).done(function(o){g(new FileEntry(o.name,c,f.name,f.makeNativeURL(c)))},function(){a(FileError.INVALID_MODIFICATION_ERR)})}else{if(h.create===false){n.getFileAsync(d).done(function(o){g(new FileEntry(o.name,c,f.name,f.makeNativeURL(c)))},function(){n.getFolderAsync(d).done(function(){a(FileError.TYPE_MISMATCH_ERR)},function(){a(FileError.NOT_FOUND_ERR)})})}}}},function(n){a(n.number==WinError.accessDenied?FileError.SECURITY_ERR:FileError.NOT_FOUND_ERR)})},readEntries:function(g,c,e){var b=getFilesystemFromURL(e[0]);var f=pathFromURL(e[0]);if(!b||!validName(f)){c(FileError.ENCODING_ERR);return}var d=cordovaPathToNative(b.winpath+f);var a=[];getFolderFromPathAsync(d).done(function(i){var j=[];var h=0;j[h++]=i.getFilesAsync().then(function(k){if(k!==null){for(var m=0;m<k.length;m++){var l=getFsPathForWinPath(b,k[m].path);if(!l){c(FileError.NOT_FOUND_ERR);return}a.push(new FileEntry(k[m].name,l,b.name,b.makeNativeURL(l)))}}});j[h++]=i.getFoldersAsync().then(function(k){if(k!==null){for(var l=0;l<k.length;l++){var m=getFsPathForWinPath(b,k[l].path);if(!m){c(FileError.NOT_FOUND_ERR);return}a.push(new DirectoryEntry(k[l].name,m,b.name,b.makeNativeURL(m)))}}});WinJS.Promise.join(j).then(function(){g(a)})},function(){c(FileError.NOT_FOUND_ERR)})},write:function(l,c,n){var b=n[0],f=n[1],i=n[2],a=n[3];var k=getFilesystemFromURL(b);var o=pathFromURL(b);if(!k){c(FileError.ENCODING_ERR);return}var d=sanitize(k.winpath+o);var e=d.substring(d.lastIndexOf("/")+1);var h=d.substring(0,d.lastIndexOf("/"));var m=cordovaPathToNative(h);function g(q,p){if(q instanceof Blob){return writeBlobAsync}if(q instanceof ArrayBuffer){return writeArrayBufferAsync}if(p){return writeBytesAsync}if(typeof q==="string"){return writeTextAsync}throw new Error("Unsupported data type for write method")}var j=g(f,a);getFolderFromPathAsync(m).done(function(p){p.createFileAsync(e,Windows.Storage.CreationCollisionOption.openIfExists).done(function(q){j(q,f,i).done(function(s){var r=s||f.length;l(r)},function(){c(FileError.INVALID_MODIFICATION_ERR)})},function(){c(FileError.INVALID_MODIFICATION_ERR)})},function(){c(FileError.NOT_FOUND_ERR)})},truncate:function(e,b,g){var a=g[0];var j=g[1];var d=getFilesystemFromURL(a);var i=pathFromURL(a);if(!d){b(FileError.ENCODING_ERR);return}var c=sanitize(d.winpath+i);var f=cordovaPathToNative(c);var h=cordovaPathToNative(c.substring(0,c.lastIndexOf("/")));getFileFromPathAsync(f).done(function(l){var k=0;l.getBasicPropertiesAsync().then(function(m){k=m.size;if(Number(j)>=k){e(this.length);return}if(Number(j)>=0){Windows.Storage.FileIO.readTextAsync(l,Windows.Storage.Streams.UnicodeEncoding.utf8).then(function(o){o=o.substr(0,j);var n=l.name;l.deleteAsync().then(function(){return getFolderFromPathAsync(h)}).done(function(p){p.createFileAsync(n).then(function(q){Windows.Storage.FileIO.writeTextAsync(q,o).done(function(){e(String(o).length)},function(){b(FileError.NO_MODIFICATION_ALLOWED_ERR)})},function(){b(FileError.NO_MODIFICATION_ALLOWED_ERR)})})},function(){b(FileError.NOT_FOUND_ERR)})}})},function(){b(FileError.NOT_FOUND_ERR)})},copyTo:function(c,a,b){transport(c,a,b,{fileOp:function(f,g,d,e){return f.copyAsync(g,d,e)},folderOp:function(e,f,d){return copyFolder(e,f,d)}})},moveTo:function(c,a,b){transport(c,a,b,{fileOp:function(f,g,d,e){return f.moveAsync(g,d,e)},folderOp:function(e,f,d){return moveFolder(e,f,d)}})},tempFileSystem:null,persistentFileSystem:null,requestFileSystem:function(f,b,c){var e=c[0];var d=c[1];var g=10000000000;if(d>g){b(FileError.QUOTA_EXCEEDED_ERR);return}var a;switch(e){case LocalFileSystem.TEMPORARY:a=getFS("temporary");break;case LocalFileSystem.PERSISTENT:a=getFS("persistent");break}if(a){f(a)}else{b(FileError.NOT_FOUND_ERR)}},resolveLocalFileSystemURI:function(g,b,c){var d=c[0];var f=pathFromURL(d);var a=getFilesystemFromURL(d);if(!a||!validName(f)){b(FileError.ENCODING_ERR);return}if(f.indexOf(a.winpath)===0){f=f.substr(a.winpath.length)}var e=cordovaPathToNative(a.winpath+f);getFileFromPathAsync(e).done(function(h){g(new FileEntry(h.name,f,a.name,a.makeNativeURL(f)))},function(){getFolderFromPathAsync(e).done(function(h){g(new DirectoryEntry(h.name,f,a.name,a.makeNativeURL(f)))},function(){b(FileError.NOT_FOUND_ERR)})})}};require("cordova/exec/proxy").add("File",module.exports);