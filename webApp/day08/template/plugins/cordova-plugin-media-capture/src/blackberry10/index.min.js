var INTERNAL_ERROR_CODE=0,APPLICATION_BUSY_ERROR_CODE=1,INVALID_ARGUMENT_ERROR_CODE=2,NO_MEDIA_FILES_ERROR_CODE=3,NOT_SUPPORTED_ERROR_CODE=20;function capture(b,h,i,d){var g=function(){},c=h.limit||1,a=function(j){i.callbackError({code:INTERNAL_ERROR_CODE})},e=function(j){var k=d.setFileSystemSandbox;d.setFileSystemSandbox=false;window.webkitRequestFileSystem(window.PERSISTENT,1024,function(l){l.root.getFile(j,{},function(m){m.file(function(n){n.fullPath=m.fullPath;d.setFileSystemSandbox=k;i.callbackOk([n])},a)},a)},a)},f=function(j){window.qnx.webplatform.getApplication().invocation.removeEventListener("childCardClosed",f);if(j.data&&j.data!==""){e(j.data)}else{i.callbackError({code:NO_MEDIA_FILES_ERROR_CODE})}};onCancelled=function(){i.callbackError({code:NO_MEDIA_FILES_ERROR_CODE})},onInvoked=function(j){if(j){i.callbackError({code:APPLICATION_BUSY_ERROR_CODE})}};if(c<0){i.error({code:INVALID_ARGUMENT_ERROR_CODE})}else{if(b==="audio"){window.qnx.webplatform.getApplication().invocation.invoke({target:"sys.apps.audiorecorder",action:"bb.action.CAPTURE"},function(j){if(j){console.log(j)}else{window.qnx.webplatform.getApplication().invocation.addEventListener("childCardClosed",f)}});i.noResult(true)}else{window.qnx.webplatform.getApplication().cards.camera.open(b,e,onCancelled,onInvoked);i.noResult(true)}}}module.exports={getSupportedAudioModes:function(e,b,c,d){var a=new PluginResult(c,d);a.ok([])},getSupportedImageModes:function(e,b,c,d){var a=new PluginResult(c,d);a.ok([])},getSupportedVideoModes:function(e,b,c,d){var a=new PluginResult(c,d);a.ok([])},captureImage:function(f,b,d,e){var a=new PluginResult(d,e),c=d[0]==="undefined"?{}:JSON.parse(decodeURIComponent(d[0]));capture("photo",c,a,e.webview)},captureVideo:function(f,b,d,e){var a=new PluginResult(d,e),c=d[0]==="undefined"?{}:JSON.parse(decodeURIComponent(d[0]));capture("video",c,a,e.webview)},captureAudio:function(e,b,c,d){var a=new PluginResult(c,d);capture("audio",{},a,d.webview)}};