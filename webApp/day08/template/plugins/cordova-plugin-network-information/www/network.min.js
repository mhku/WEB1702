var exec=require("cordova/exec"),cordova=require("cordova"),channel=require("cordova/channel"),utils=require("cordova/utils");if(cordova.platformId!=="browser"&&typeof navigator!="undefined"){utils.defineGetter(navigator,"onLine",function(){return this.connection.type!="none"})}function NetworkConnection(){this.type="unknown"}NetworkConnection.prototype.getInfo=function(a,b){exec(a,b,"NetworkStatus","getConnectionInfo",[])};var me=new NetworkConnection();var timerId=null;var timeout=500;channel.createSticky("onCordovaConnectionReady");channel.waitForInitialization("onCordovaConnectionReady");channel.onCordovaReady.subscribe(function(){me.getInfo(function(a){me.type=a;if(a==="none"){timerId=setTimeout(function(){cordova.fireDocumentEvent("offline");timerId=null},timeout)}else{if(timerId!==null){clearTimeout(timerId);timerId=null}cordova.fireDocumentEvent("online")}if(channel.onCordovaConnectionReady.state!==2){channel.onCordovaConnectionReady.fire()}},function(a){if(channel.onCordovaConnectionReady.state!==2){channel.onCordovaConnectionReady.fire()}console.log("Error initializing Network Connection: "+a)})});module.exports=me;