exports.defineAutoTests=function(){var a=(cordova.platformId=="windows8")||(cordova.platformId=="windows"&&!WinJS.Utilities.isPhone),b;describe("Battery (navigator.battery)",function(){it("battery.spec.1 should exist",function(){if(a){pending("Battery status is not supported on windows store")}expect(navigator.battery).toBeDefined()})});describe("Battery Events",function(){describe("batterystatus",function(){afterEach(function(){if(!a){try{window.removeEventListener("batterystatus",b,false)}catch(c){console.err("Error removing batterystatus event listener: "+c)}}});it("battery.spec.2 should fire batterystatus events",function(c){if(a){pending("Battery status is not supported on windows store")}b=jasmine.createSpy("BatteryStatus");window.addEventListener("batterystatus",b,false);navigator.battery._status({level:30,isPlugged:false});setTimeout(function(){expect(b).toHaveBeenCalled();c()},100)})});describe("batterylow",function(){afterEach(function(){if(!a){try{window.removeEventListener("batterylow",b,false)}catch(c){console.err("Error removing batterylow event listener: "+c)}}});it("battery.spec.3 should fire batterylow event (30 -> 20)",function(c){if(a){pending("Battery status is not supported on windows store")}b=jasmine.createSpy("BatteryLow");window.addEventListener("batterylow",b,false);navigator.battery._status({level:30,isPlugged:false});navigator.battery._status({level:20,isPlugged:false});setTimeout(function(){expect(b).toHaveBeenCalled();c()},100)});it("battery.spec.3.1 should fire batterylow event (30 -> 19)",function(c){if(a){pending("Battery status is not supported on windows store")}b=jasmine.createSpy("BatteryLow");window.addEventListener("batterylow",b,false);navigator.battery._status({level:30,isPlugged:false});navigator.battery._status({level:19,isPlugged:false});setTimeout(function(){expect(b).toHaveBeenCalled();c()},100)});it("battery.spec.3.2 should not fire batterylow event (5 -> 20)",function(c){if(a){pending("Battery status is not supported on windows store")}b=jasmine.createSpy("BatteryLow");window.addEventListener("batterylow",b,false);navigator.battery._status({level:5,isPlugged:false});navigator.battery._status({level:20,isPlugged:false});setTimeout(function(){expect(b).not.toHaveBeenCalled();c()},100)});it("battery.spec.3.3 batterylow event(21 -> 20) should not fire if charging",function(c){if(a){pending("Battery status is not supported on windows store")}b=jasmine.createSpy("BatteryLow");window.addEventListener("batterylow",b,false);navigator.battery._status({level:21,isPlugged:true});navigator.battery._status({level:20,isPlugged:true});setTimeout(function(){expect(b).not.toHaveBeenCalled();c()},100)})});describe("batterycritical",function(){afterEach(function(){if(!a){try{window.removeEventListener("batterycritical",b,false)}catch(c){console.err("Error removing batterycritical event listener: "+c)}}});it("battery.spec.4 should fire batterycritical event (19 -> 5)",function(c){if(a){pending("Battery status is not supported on windows store")}b=jasmine.createSpy("BatteryCritical");window.addEventListener("batterycritical",b,false);navigator.battery._status({level:19,isPlugged:false});navigator.battery._status({level:5,isPlugged:false});setTimeout(function(){expect(b).toHaveBeenCalled();c()},100)});it("battery.spec.4.1 should fire batterycritical event (19 -> 4)",function(c){if(a){pending("Battery status is not supported on windows store")}b=jasmine.createSpy("BatteryCritical");window.addEventListener("batterycritical",b,false);navigator.battery._status({level:19,isPlugged:false});navigator.battery._status({level:4,isPlugged:false});setTimeout(function(){expect(b).toHaveBeenCalled();c()},100)});it("battery.spec.4.2 should fire batterycritical event (100 -> 4) when decreases",function(c){if(a){pending("Battery status is not supported on windows store")}b=jasmine.createSpy("BatteryCritical");window.addEventListener("batterycritical",b,false);navigator.battery._status({level:100,isPlugged:false});navigator.battery._status({level:4,isPlugged:false});setTimeout(function(){expect(b).toHaveBeenCalled();c()},100)});it("battery.spec.4.3 should not fire batterycritical event (4 -> 5) when increasing",function(c){if(a){pending("Battery status is not supported on windows store")}b=jasmine.createSpy("BatteryCritical");window.addEventListener("batterycritical",b,false);navigator.battery._status({level:4,isPlugged:false});navigator.battery._status({level:5,isPlugged:false});setTimeout(function(){expect(b.calls.count()).toBeLessThan(2);c()},100)});it("battery.spec.4.4 should not fire batterycritical event (6 -> 5) if charging",function(c){if(a){pending("Battery status is not supported on windows store")}b=jasmine.createSpy("BatteryCritical");window.addEventListener("batterycritical",b,false);navigator.battery._status({level:6,isPlugged:true});navigator.battery._status({level:5,isPlugged:true});setTimeout(function(){expect(b).not.toHaveBeenCalled();c()},100)})})})};exports.defineManualTests=function(c,o){function j(p){document.getElementById("levelValue").innerText=p.level;document.getElementById("pluggedValue").innerText=p.isPlugged;if(p.level>5){document.getElementById("criticalValue").innerText="false"}if(p.level>20){document.getElementById("lowValue").innerText="false"}}function i(p){document.getElementById("lowValue").innerText="true"}function g(p){document.getElementById("criticalValue").innerText="true"}function f(){window.addEventListener("batterystatus",j,false)}function b(){window.removeEventListener("batterystatus",j,false)}function m(){window.addEventListener("batterylow",i,false)}function h(){window.removeEventListener("batterylow",i,false)}function k(){window.addEventListener("batterycritical",g,false)}function e(){window.removeEventListener("batterycritical",g,false)}function d(t,B,z,p){var y=document.createElement("table");for(var q=0;q<B;q++){var A=y.insertRow(q);for(var w=0;w<z;w++){var x=A.insertCell(w);x.setAttribute("align","center");for(var v in p){if(p[v].position.row==q&&p[v].position.cell==w){var s=document.createElement(p[v].tag);var u;if(p[v].content!==""){u=document.createTextNode(p[v].content);s.appendChild(u)}if(p[v].type){s.type=p[v].type}s.setAttribute("id",p[v].id);x.appendChild(s)}}}}y.setAttribute("align","center");y.setAttribute("id",t);return y}var l=[{id:"statusTag",content:"Status:",tag:"div",position:{row:0,cell:0}},{id:"statusValue",content:"",tag:"div",position:{row:0,cell:1}},{id:"levelTag",content:"Level:",tag:"div",position:{row:1,cell:0}},{id:"levelValue",content:"",tag:"div",position:{row:1,cell:1}},{id:"pluggedTag",content:"Plugged:",tag:"div",position:{row:2,cell:0}},{id:"pluggedValue",content:"",tag:"div",position:{row:2,cell:1}},{id:"lowTag",content:"Low:",tag:"div",position:{row:3,cell:0}},{id:"lowValue",content:"",tag:"div",position:{row:3,cell:1}},{id:"criticalTag",content:"Critical:",tag:"div",position:{row:4,cell:0}},{id:"criticalValue",content:"",tag:"div",position:{row:4,cell:1}}];var a=document.createElement("h2");a.appendChild(document.createTextNode("Battery Status"));a.setAttribute("align","center");c.appendChild(a);var n=d("info",5,3,l);c.appendChild(n);a=document.createElement("h2");a.appendChild(document.createTextNode("Actions"));a.setAttribute("align","center");c.appendChild(a);c.innerHTML+='<h3>Battery Status Tests</h3>Will update values for level and plugged when they change. If battery low and critical values are false, they will get updated in status box, but only once<div id="addBS"></div><div id="remBs"></div><h3>Battery Low Tests</h3></p> Will update value for battery low to true when battery is below 20%<div id="addBl"></div><div id="remBl"></div><h3>Battery Critical Tests</h3></p> Will update value for battery critical to true when battery is below 5%<div id="addBc"></div><div id="remBc"></div>';o('Add "batterystatus" listener',function(){f()},"addBS");o('Remove "batterystatus" listener',function(){b()},"remBs");o('Add "batterylow" listener',function(){m()},"addBl");o('Remove "batterylow" listener',function(){h()},"remBl");o('Add "batterycritical" listener',function(){k()},"addBc");o('Remove "batterycritical" listener',function(){e()},"remBc")};