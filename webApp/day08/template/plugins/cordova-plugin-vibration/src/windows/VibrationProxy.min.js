function checkReqs(b,a){if(!(Windows.Phone&&Windows.Phone.Devices&&Windows.Phone.Devices.Notification&&Windows.Phone.Devices.Notification.VibrationDevice)&&WinJS.Utilities.isPhone!==true){a(b+" is unsupported by this platform.");return false}return true}function tryDoAction(b,g,a,c,d){try{if(checkReqs(b,a)!==true){return}d(c);g()}catch(f){a("Error occured while trying to "+b+": "+f)}}function tryParsePatternValues(b){var c=true,a;b=b.map(function(e){var d=parseInt(e,10);if(isNaN(d)){a=e;c=false}return d});return{parsed:b,passed:c,failedItem:a}}function checkPatternReqs(c,b){var a=tryParsePatternValues(c[0]);var e=c[1];var f=true,d="";if(!a.passed){d+="Could not parse "+a.failedItem+" in the vibration pattern";f=false}if(e!==-1&&(e<0||e>c[0].length-1)){d+="\nrepeat parameter is out of range: "+e;f=false}if(!f){console.error(d);if(b){b(d)}}return{passed:f,patternParsingResult:a}}function vibratePattern(d,a,b,c){return d.reduce(function(e,g,f){if(f%2===0){return e.then(function(){module.exports.vibrate(function(){},function(h){console.error(h);if(b){b(h)}},[g]);if(f===d.length-1&&a){return WinJS.Promise.timeout(g).then(function(){return vibratePattern(c,true,b,c)})}else{return WinJS.Promise.timeout(g)}})}else{return e.then(function(){if(f===d.length-1&&a){return WinJS.Promise.timeout(g).then(function(){return vibratePattern(c,true,b,c)})}else{return WinJS.Promise.timeout(g)}})}},WinJS.Promise.as())}var DEFAULT_DURATION=200;var patternChainPromise;var VibrationDevice=(Windows.Phone&&Windows.Phone.Devices&&Windows.Phone.Devices.Notification&&Windows.Phone.Devices.Notification.VibrationDevice&&Windows.Phone.Devices.Notification.VibrationDevice);if(VibrationDevice){module.exports={vibrate:function(f,a,b){try{var d=parseInt(b[0]);if(isNaN(d)){d=DEFAULT_DURATION}VibrationDevice.getDefault().vibrate(d);f()}catch(c){a(c)}},vibrateWithPattern:function(c,a,b){module.exports.cancelVibration(function(){var h=checkPatternReqs(b,a);if(!h.passed){return}var g=h.patternParsingResult.parsed;var e=b[1];var d=(e!==-1);var f;if(d){f=g.slice(e)}patternChainPromise=vibratePattern(g,d,a,f)},a)},cancelVibration:function(d,a,b){try{if(patternChainPromise){patternChainPromise.cancel()}VibrationDevice.getDefault().cancel();if(d){d()}}catch(c){if(a){a(c)}}}}}else{if(typeof Vibration!=="undefined"&&Vibration.Vibration){module.exports={vibrate:function(c,a,b){tryDoAction("vibrate",c,a,b,Vibration.Vibration.vibrate)},vibrateWithPattern:function(c,a,b){tryDoAction("vibrate",c,a,[DEFAULT_DURATION],Vibration.Vibration.vibrate)},cancelVibration:function(c,a,b){tryDoAction("cancelVibration",c,a,b,Vibration.Vibration.cancelVibration)}}}else{module.exports={vibrate:function(b,a){if(a){a('"vibrate" is unsupported by this device.')}},vibrateWithPattern:function(c,a,b){if(a){a('"vibrateWithPattern" is unsupported by this device.')}},cancelVibration:function(c,a,b){if(c){c()}}}}}require("cordova/exec/proxy").add("Vibration",module.exports);