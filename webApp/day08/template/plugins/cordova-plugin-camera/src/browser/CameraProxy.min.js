var HIGHEST_POSSIBLE_Z_INDEX=2147483647;function takePicture(d,b,c){if(c&&c[2]===1){capture(d,b)}else{var a=document.createElement("input");a.style.position="relative";a.style.zIndex=HIGHEST_POSSIBLE_Z_INDEX;a.type="file";a.name="files[]";a.onchange=function(f){var e=new FileReader();e.onload=function(g){a.parentNode.removeChild(a);var h=g.target.result;return d(h.substr(h.indexOf(",")+1))};e.readAsDataURL(f.target.files[0])};document.body.appendChild(a)}}function capture(g,b){var c;var f=document.createElement("video");var d=document.createElement("button");var e=document.createElement("div");e.style.position="relative";e.style.zIndex=HIGHEST_POSSIBLE_Z_INDEX;e.appendChild(f);e.appendChild(d);f.width=320;f.height=240;d.innerHTML="Capture!";d.onclick=function(){var h=document.createElement("canvas");h.getContext("2d").drawImage(f,0,0,320,240);var i=h.toDataURL("img/png");i=i.replace("data:image/png;base64,","");if(c.stop){c.stop()}else{c.getTracks().forEach(function(j){j.stop()})}e.parentNode.removeChild(e);return g(i)};navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var a=function(h){c=h;f.src=window.URL.createObjectURL(c);f.play();document.body.appendChild(e)};if(navigator.getUserMedia){navigator.getUserMedia({video:true,audio:true},a,b)}else{alert("Browser does not support camera :(")}}module.exports={takePicture:takePicture,cleanup:function(){}};require("cordova/exec/proxy").add("Camera",module.exports);