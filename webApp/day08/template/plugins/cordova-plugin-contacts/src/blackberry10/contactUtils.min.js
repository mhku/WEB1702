var self,ContactFindOptions=require("./ContactFindOptions"),ContactError=require("./ContactError"),ContactName=require("./ContactName"),ContactOrganization=require("./ContactOrganization"),ContactAddress=require("./ContactAddress"),ContactField=require("./ContactField"),contactConsts=require("./contactConsts"),ContactPhoto=require("./ContactPhoto"),ContactNews=require("./ContactNews"),ContactActivity=require("./ContactActivity");function populateFieldArray(a,e,b){if(a[e]){var c=[],d;a[e].forEach(function(f){if(b===ContactField){c.push(new b(f.type,f.value))}else{if(b===ContactPhoto){d=new ContactPhoto(f.originalFilePath,f.pref);d.largeFilePath=f.largeFilePath;d.smallFilePath=f.smallFilePath;c.push(d)}else{if(b===ContactNews){d=new ContactNews(f);c.push(d)}else{if(b===ContactActivity){d=new ContactActivity(f);c.push(d)}else{c.push(new b(f))}}}}});a[e]=c}}function populateDate(a,b){if(a[b]){a[b]=new Date(a[b])}}function validateFindArguments(b){var a=false;if(!b){a=true}else{if(b.filter){b.filter.forEach(function(c){switch(c.fieldName){case ContactFindOptions.SEARCH_FIELD_GIVEN_NAME:case ContactFindOptions.SEARCH_FIELD_FAMILY_NAME:case ContactFindOptions.SEARCH_FIELD_ORGANIZATION_NAME:case ContactFindOptions.SEARCH_FIELD_PHONE:case ContactFindOptions.SEARCH_FIELD_EMAIL:case ContactFindOptions.SEARCH_FIELD_BBMPIN:case ContactFindOptions.SEARCH_FIELD_LINKEDIN:case ContactFindOptions.SEARCH_FIELD_TWITTER:case ContactFindOptions.SEARCH_FIELD_VIDEO_CHAT:break;default:a=true}if(!c.fieldValue){a=true}})}if(b.limit){if(typeof b.limit!=="number"){a=true}}if(b.favorite){if(typeof b.favorite!=="boolean"){a=true}}if(!a&&b.sort&&Array.isArray(b.sort)){b.sort.forEach(function(c){switch(c.fieldName){case ContactFindOptions.SORT_FIELD_GIVEN_NAME:case ContactFindOptions.SORT_FIELD_FAMILY_NAME:case ContactFindOptions.SORT_FIELD_ORGANIZATION_NAME:break;default:a=true}if(c.desc===undefined||typeof c.desc!=="boolean"){a=true}})}if(!a&&b.includeAccounts){if(!Array.isArray(b.includeAccounts)){a=true}else{b.includeAccounts.forEach(function(c){if(!a&&(!c.id||window.isNaN(window.parseInt(c.id,10)))){a=true}})}}if(!a&&b.excludeAccounts){if(!Array.isArray(b.excludeAccounts)){a=true}else{b.excludeAccounts.forEach(function(c){if(!a&&(!c.id||window.isNaN(window.parseInt(c.id,10)))){a=true}})}}}return !a}function validateContactsPickerFilter(a){var b=true,c={};if(typeof(a)==="undefined"){b=false}else{if(a&&Array.isArray(a)){c=contactConsts.getKindAttributeMap();a.forEach(function(d){b=b&&Object.getOwnPropertyNames(c).reduce(function(f,e){return f||c[e]===d},false)})}}return b}function validateContactsPickerOptions(a){var b=false,c=a.mode;if(typeof(a)==="undefined"){b=false}else{b=c===ContactPickerOptions.MODE_SINGLE||c===ContactPickerOptions.MODE_MULTIPLE||c===ContactPickerOptions.MODE_ATTRIBUTE;if(c===ContactPickerOptions.MODE_ATTRIBUTE&&!validateContactsPickerFilter(a.fields)){b=false}}return b}self=module.exports={populateContact:function(a){if(a.name){a.name=new ContactName(a.name)}populateFieldArray(a,"addresses",ContactAddress);populateFieldArray(a,"organizations",ContactOrganization);populateFieldArray(a,"emails",ContactField);populateFieldArray(a,"phoneNumbers",ContactField);populateFieldArray(a,"faxNumbers",ContactField);populateFieldArray(a,"pagerNumbers",ContactField);populateFieldArray(a,"ims",ContactField);populateFieldArray(a,"socialNetworks",ContactField);populateFieldArray(a,"urls",ContactField);populateFieldArray(a,"photos",ContactPhoto);populateFieldArray(a,"news",ContactNews);populateFieldArray(a,"activities",ContactActivity);populateDate(a,"birthday");populateDate(a,"anniversary")},invokeErrorCallback:function(a,b){if(a){a(new ContactError(b))}},validateFindArguments:validateFindArguments,validateContactsPickerFilter:validateContactsPickerFilter,validateContactsPickerOptions:validateContactsPickerOptions};