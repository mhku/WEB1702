var splashImageWidth=170;var splashImageHeight=200;var position={x:0,y:0,width:splashImageWidth,height:splashImageHeight};var localSplash;var localSplashImage;var bgColor="#464646";var imageSrc="/img/logo.png";var splashScreenDelay=3000;var showSplashScreen=true;var cordova=require("cordova");var configHelper=cordova.require("cordova/confighelper");function updateImageLocation(){position.width=Math.min(splashImageWidth,window.innerWidth);position.height=position.width*(splashImageHeight/splashImageWidth);localSplash.style.width=window.innerWidth+"px";localSplash.style.height=window.innerHeight+"px";localSplash.style.top="0px";localSplash.style.left="0px";localSplashImage.style.top="50%";localSplashImage.style.left="50%";localSplashImage.style.height=position.height+"px";localSplashImage.style.width=position.width+"px";localSplashImage.style.marginTop=(-position.height/2)+"px";localSplashImage.style.marginLeft=(-position.width/2)+"px"}function onResize(){updateImageLocation()}var SplashScreen={setBGColor:function(a){bgColor=a;if(localSplash){localSplash.style.backgroundColor=bgColor}},show:function(){if(!localSplash){window.addEventListener("resize",onResize,false);localSplash=document.createElement("div");localSplash.style.backgroundColor=bgColor;localSplash.style.position="absolute";localSplashImage=document.createElement("img");localSplashImage.src=imageSrc;localSplashImage.style.position="absolute";updateImageLocation();localSplash.appendChild(localSplashImage);document.body.appendChild(localSplash)}},hide:function(){if(localSplash){window.removeEventListener("resize",onResize,false);document.body.removeChild(localSplash);localSplash=null}}};function readPreferencesFromCfg(a){try{var b=a.getPreferenceValue("ShowSplashScreen");if(typeof b!="undefined"){showSplashScreen=b==="true"}splashScreenDelay=a.getPreferenceValue("SplashScreenDelay")||splashScreenDelay;imageSrc=a.getPreferenceValue("SplashScreen")||imageSrc;bgColor=a.getPreferenceValue("SplashScreenBackgroundColor")||bgColor;splashImageWidth=a.getPreferenceValue("SplashScreenWidth")||splashImageWidth;splashImageHeight=a.getPreferenceValue("SplashScreenHeight")||splashImageHeight}catch(c){var d="[Browser][SplashScreen] Error occured on loading preferences from config.xml: "+JSON.stringify(c);console.error(d)}}function showAndHide(){if(showSplashScreen){SplashScreen.show();window.setTimeout(function(){SplashScreen.hide()},splashScreenDelay)}}(function initAndShow(){configHelper.readConfig(function(a){readPreferencesFromCfg(a);showAndHide()},function(a){console.error(a)})})();module.exports=SplashScreen;require("cordova/exec/proxy").add("SplashScreen",SplashScreen);