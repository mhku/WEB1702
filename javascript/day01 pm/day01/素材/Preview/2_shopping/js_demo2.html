<!DOCTYPE html>
<html>
    <head>
        <title>购物车</title>
        <meta charset="utf-8" />
		<link type="text/css" rel="Stylesheet" href="myStyle.css" />
        <script>
			function count(btnObj){	
	var countObj=btnObj.parentNode.getElementsByTagName("INPUT")[1];	
	var oldCount = parseInt(countObj.value);	
	btnObj.value == "+"?countObj.value = oldCount +1 : countObj.value = oldCount -1;	
	if(countObj.value < 1) countObj.value=1;
	calculate();
}
function calculate() {    
    var total = 0;
    var trNodes = document.getElementById("shoppingCart")
		.getElementsByTagName("tr");    
    for (var i = 1; i < trNodes.length-1; i++) {	
        var tds = trNodes[i].getElementsByTagName("td");
		var price = tds[1].innerHTML;
        var quantity = tds[2].getElementsByTagName("input")[1].value; 
        var sum = parseFloat(price) * parseFloat(quantity);	
        tds[3].innerHTML = sum.toFixed(2);        
        total += sum;
    }
    trNodes[trNodes.length-1]
		.getElementsByTagName("td")[1]
		.innerHTML = total.toFixed(2);
}
		</script>
        
    </head>
    <body>
            <table id="shoppingCart">
                <tr>
                    <td style="width:100px;">商品名称</td>
                    <td style="width:100px;">价格</td>
                    <td style="width:150px;">数量</td>
                    <td style="width:100px;">小计</td>
                </tr>
                <tr>
                    <td>book1</td>
                    <td>10.00</td>
                    <td>
                        <input class="btn" type="button" value="-" onclick="count(this)"/>
                        <input class="txt" type="text" value="1" readonly/>
                        <input class="btn" type="button" value="+" onclick="count(this)"/>
                    </td>
                    <td>10.00</td>
                </tr>
                <tr>
                    <td>book2</td>
                    <td>5.00</td>
                    <td>
                        <input class="btn" type="button" value="-" onclick="count(this)"/>
                        <input class="txt" type="text" value="1" readonly/>
                        <input class="btn" type="button" value="+" onclick="count(this)"/>
                    </td>
                    <td>5.00</td>
                </tr>
                <tr>               
                    <td style="text-align:right;" colspan="3">总计：</td>     
                    <td>15.00</td>
                </tr>
            </table>
    </body>
</html>
